
<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8">
  <meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Configuration Loaders &mdash; Sponge 7.3.0 documentation</title>

  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />  <link rel="stylesheet" href="../../_static/spongedocs.css" type="text/css" />
    <link rel="shortcut icon" href="../../_static/favicon.ico"/>

  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->      <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>        <script src="../../_static/jquery.js"></script>        <script src="../../_static/underscore.js"></script>        <script src="../../_static/doctools.js"></script>        <script src="../../_static/language_data.js"></script>        <script src="../../_static/spongedocs.js"></script>    <script type="text/javascript" src="../../_static/js/theme.js"></script>

    <link rel="index" title="Index" href="../../genindex.html" />    <link rel="search" title="Search" href="../../search.html" />    <link rel="next" title="Configuration Nodes" href="nodes.html" />    <link rel="prev" title="Configuring Plugins" href="index.html" /></head>

<body class="wy-body-for-nav">

   <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
    <div id="sp-logo-container" class="page-scroll">
        <a class="logo" href="../../index.html">
            <img src="../../_static/spongie-mark-dark.svg">
            <span>Sponge</span>
            <i class="fa fa-fw fa-chevron-down"></i>
        </a>
        <div id="sp-logo-menu">
            <ul id="sp-logo-dropdown">
                <li><a href="https://www.spongepowered.org"><i class="fa-fw fa fa-home"></i>Homepage</a></li>
                <li><a href="https://forums.spongepowered.org"><i class="fa-fw fa fa-comments"></i>Forums</a></li>
                <li><a href="https://github.com/SpongePowered"><i class="fa-fw fa fa-code"></i>Code</a></li>
                <li class="active"><a href="https://docs.spongepowered.org"><i class="fa-fw fa fa-book"></i>Docs</a></li>
                <li><a href="https://jd.spongepowered.org"><i class="fa-fw fa fa-graduation-cap"></i>Javadocs</a></li>
                <li><a href="https://forums.spongepowered.org/c/plugins/plugin-releases"><i class="fa-fw fa fa-plug"></i>Plugins</a></li>
                <li><a href="https://ore.spongepowered.org"><img src="../../_static/ore.svg" alt="" class="fa-fw fa ore-logo">Ore <sup>Beta</sup></a></li>
                <li><a href="https://www.spongepowered.org/downloads"><i class="fa-fw fa fa-download"></i>Downloads</a></li>
                <li><a href="https://www.spongepowered.org/chat"><i class="fa-fw fa fa-comment"></i>Chat</a></li>
            </ul>
        </div>
    </div>

<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../../server/index.html">Creating a Server</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../versions/index.html">Versioning Policy</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../preparing/index.html">Preparing for Development</a></li>
</ul>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">Creating a Plugin</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../api-versions.html">API-Versions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../buildsystem.html">Build Systems</a></li>
<li class="toctree-l2"><a class="reference internal" href="../workspace/index.html">Setting Up Your Workspace</a></li>
<li class="toctree-l2"><a class="reference internal" href="../project/index.html">Setting Up Your Project</a></li>
<li class="toctree-l2"><a class="reference internal" href="../plugin-identifier.html">Plugin Identifiers</a></li>
<li class="toctree-l2"><a class="reference internal" href="../plugin-class.html">Main Plugin Class</a></li>
<li class="toctree-l2"><a class="reference internal" href="../lifecycle.html">Plugin Lifecycle</a></li>
<li class="toctree-l2"><a class="reference internal" href="../injection.html">Dependency Injection</a></li>
<li class="toctree-l2"><a class="reference internal" href="../practices/index.html">Practices</a></li>
<li class="toctree-l2"><a class="reference internal" href="../optional/index.html">Optionals</a></li>
<li class="toctree-l2"><a class="reference internal" href="../logging.html">Logging and Debugging</a></li>
<li class="toctree-l2"><a class="reference internal" href="../text/index.html">Text</a></li>
<li class="toctree-l2"><a class="reference internal" href="../commands/index.html">Plugin Commands</a></li>
<li class="toctree-l2"><a class="reference internal" href="../event/index.html">Events</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="index.html">Configuring Plugins</a><ul class="current">
<li class="toctree-l3 current"><a class="current reference internal" href="#">Configuration Loaders</a></li>
<li class="toctree-l3"><a class="reference internal" href="nodes.html">Configuration Nodes</a></li>
<li class="toctree-l3"><a class="reference internal" href="serialization.html">Serializing Objects</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../assets.html">The Asset API</a></li>
<li class="toctree-l2"><a class="reference internal" href="../data/index.html">The Data API</a></li>
<li class="toctree-l2"><a class="reference internal" href="../blocks/index.html">Blocks</a></li>
<li class="toctree-l2"><a class="reference internal" href="../entities/index.html">Entities</a></li>
<li class="toctree-l2"><a class="reference internal" href="../items/index.html">Items</a></li>
<li class="toctree-l2"><a class="reference internal" href="../trade-offers.html">Trade-Offers</a></li>
<li class="toctree-l2"><a class="reference internal" href="../effects.html">Effects</a></li>
<li class="toctree-l2"><a class="reference internal" href="../scheduler.html">Scheduler</a></li>
<li class="toctree-l2"><a class="reference internal" href="../services.html">Services</a></li>
<li class="toctree-l2"><a class="reference internal" href="../database.html">Databases</a></li>
<li class="toctree-l2"><a class="reference internal" href="../permissions.html">Permissions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../bans.html">Bans</a></li>
<li class="toctree-l2"><a class="reference internal" href="../metrics.html">Metrics Collection</a></li>
<li class="toctree-l2"><a class="reference internal" href="../bookview.html">Book Views</a></li>
<li class="toctree-l2"><a class="reference internal" href="../economy/index.html">Economy</a></li>
<li class="toctree-l2"><a class="reference internal" href="../placeholders/index.html">Placeholders</a></li>
<li class="toctree-l2"><a class="reference internal" href="../wgen/index.html">World Generation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../manager.html">Plugin Manager</a></li>
<li class="toctree-l2"><a class="reference internal" href="../game-profile-manager.html">Game Profile Manager</a></li>
<li class="toctree-l2"><a class="reference internal" href="../offline-userplayer-data.html">Offline Player Data</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tab-lists.html">Tab Lists</a></li>
<li class="toctree-l2"><a class="reference internal" href="../plugin-meta.html">Plugin Metadata</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ray-tracing.html">Ray Tracing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../debugging.html">Plugin Debugging</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tutorials.html">Tutorials</a></li>
<li class="toctree-l2"><a class="reference internal" href="../internals/index.html">Implementation-dependent Plugins</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../ore/index.html">Ore Documentation</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../contributing/index.html">Contributing to Sponge</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../about/index.html">About the Sponge Project</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      <nav class="wy-nav-top" aria-label="top navigation">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">Sponge</a>
      </nav>


      <div class="wy-nav-content">        <div class="rst-content">






<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home"></a> &raquo;</li>
          <li><a href="../index.html">Creating a Plugin</a> &raquo;</li>
          <li><a href="index.html">Configuring Plugins</a> &raquo;</li>
      <li>Configuration Loaders</li>
      <li class="wy-breadcrumbs-aside">
              <a href="https://github.com/SpongePowered/SpongeDocs/blob/zebra-mango-llama/source/plugin/configuration/loaders.rst" class="fa fa-github"> Edit on GitHub</a>
      </li>
  </ul>

  <hr/>
</div>          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">           <div itemprop="articleBody">
  <section id="configuration-loaders">
<h1>Configuration Loaders<a class="headerlink" href="#configuration-loaders" title="Permalink to this headline">¶</a></h1>
<p>Let’s break down how Configurate works, beginning with the loading process. Configurate provides
<a class="reference external" href="https://configurate.aoeu.xyz/apidocs/ninja/leaping/configurate/loader/ConfigurationLoader.html">ConfigurationLoader</a>s for common configuration formats, standing as the manager of the physical
configuration file, allowing you to save and load data from the given resource. They also allow you to load empty
configurations, giving you the option of hard-coding default values or loading from a pre-written file.</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>The default and recommended config format for Sponge plugins is HOCON.</p>
</div>
<section id="getting-your-loader">
<h2>Getting your Loader<a class="headerlink" href="#getting-your-loader" title="Permalink to this headline">¶</a></h2>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The default <a class="reference external" href="https://configurate.aoeu.xyz/apidocs/ninja/leaping/configurate/loader/ConfigurationLoader.html">ConfigurationLoader</a> can be used instead if you’re using only a single HOCON config file;
see the <a class="reference internal" href="index.html"><span class="doc">main configuration page</span></a>.</p>
</div>
<p>First, let’s grab a new <a class="reference external" href="https://configurate.aoeu.xyz/apidocs/ninja/leaping/configurate/hocon/HoconConfigurationLoader.html">HoconConfigurationLoader</a> that points to our configuration file.</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">java.nio.file.Path</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">ninja.leaping.configurate.commented.CommentedConfigurationNode</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">ninja.leaping.configurate.hocon.HoconConfigurationLoader</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">ninja.leaping.configurate.loader.ConfigurationLoader</span><span class="p">;</span>

<span class="n">Path</span> <span class="n">potentialFile</span> <span class="o">=</span> <span class="n">getConfigPath</span><span class="p">();</span>
<span class="n">ConfigurationLoader</span><span class="o">&lt;</span><span class="n">CommentedConfigurationNode</span><span class="o">&gt;</span> <span class="n">loader</span> <span class="o">=</span>
        <span class="n">HoconConfigurationLoader</span><span class="p">.</span><span class="na">builder</span><span class="p">().</span><span class="na">setPath</span><span class="p">(</span><span class="n">potentialFile</span><span class="p">).</span><span class="na">build</span><span class="p">();</span>
</pre></div>
</div>
<p>The loader will also hold a generic type depending what kind of node it will build. These <em>Configuration Nodes</em> will be
discussed in <a class="reference internal" href="nodes.html"><span class="doc">a later section</span></a>.</p>
<p><code class="docutils literal notranslate"><span class="pre">ConfigurationLoader</span></code>s usually hold a builder for you to statically access and create a new instance of the loader of
your desired type. For a basic configuration, we don’t really need to specify anything other than the file we want to
load from and/or save to, so all we’ll do is tell it exactly that, using
<a class="reference external" href="https://configurate.aoeu.xyz/apidocs/ninja/leaping/configurate/loader/AbstractConfigurationLoader.Builder.html#setPath-java.nio.file.Path-">HoconConfigurationLoader.builder().setPath(path)</a>.
We then tell the builder to build the instance (<a class="reference external" href="https://configurate.aoeu.xyz/apidocs/ninja/leaping/configurate/hocon/HoconConfigurationLoader.Builder.html#build--">build()</a>) for it
and store it in a variable.</p>
<p>Of course, this isn’t the only way to load a file. The builder also has the method
<a class="reference external" href="https://configurate.aoeu.xyz/apidocs/ninja/leaping/configurate/loader/AbstractConfigurationLoader.Builder.html#setURL-java.net.URL-">setURL(url)</a>, in case you want
to load a resource without using a <a class="reference external" href="https://docs.oracle.com/javase/8/docs/api/java/nio/file/Path.html">Path</a> object. Bear in mind that configuration loaders created from a
<a class="reference external" href="https://docs.oracle.com/javase/8/docs/api/java/net/URL.html">URL</a> are read-only as they have no way of writing back data to the URL.</p>
<p>This functionality may be used to bundle default configurations with your plugin jar file and load them as initial
configuration to be edited by the server administrator (or your plugin itself).</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This example uses a <code class="docutils literal notranslate"><span class="pre">HoconConfigurationLoader</span></code>, which is the recommended approach for Sponge plugins, but
you can also use a <a class="reference external" href="https://configurate.aoeu.xyz/apidocs/ninja/leaping/configurate/yaml/YAMLConfigurationLoader.html">YAMLConfigurationLoader</a> or <a class="reference external" href="https://configurate.aoeu.xyz/apidocs/ninja/leaping/configurate/gson/GsonConfigurationLoader.html">GsonConfigurationLoader</a> for loading legacy
configs.</p>
</div>
</section>
<section id="loading-and-saving">
<h2>Loading and Saving<a class="headerlink" href="#loading-and-saving" title="Permalink to this headline">¶</a></h2>
<p>Once you obtained your <code class="docutils literal notranslate"><span class="pre">ConfigurationLoader</span></code> you can use it to obtain an empty <a class="reference external" href="https://configurate.aoeu.xyz/apidocs/ninja/leaping/configurate/ConfigurationNode.html">ConfigurationNode</a> using the
<a class="reference external" href="https://configurate.aoeu.xyz/apidocs/ninja/leaping/configurate/loader/ConfigurationLoader.html#createEmptyNode--">createEmptyNode()</a> method.</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">ninja.leaping.configurate.ConfigurationNode</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">ninja.leaping.configurate.ConfigurationOptions</span><span class="p">;</span>

<span class="n">Path</span> <span class="n">potentialFile</span> <span class="o">=</span> <span class="n">getConfigPath</span><span class="p">();</span>
<span class="n">ConfigurationLoader</span><span class="o">&lt;</span><span class="n">CommentedConfigurationNode</span><span class="o">&gt;</span> <span class="n">loader</span> <span class="o">=</span>
        <span class="n">HoconConfigurationLoader</span><span class="p">.</span><span class="na">builder</span><span class="p">().</span><span class="na">setPath</span><span class="p">(</span><span class="n">potentialFile</span><span class="p">).</span><span class="na">build</span><span class="p">();</span>
<span class="n">ConfigurationNode</span> <span class="n">rootNode</span> <span class="o">=</span> <span class="n">loader</span><span class="p">.</span><span class="na">createEmptyNode</span><span class="p">(</span><span class="n">ConfigurationOptions</span><span class="p">.</span><span class="na">defaults</span><span class="p">());</span>
</pre></div>
</div>
<p>This method expects the <a class="reference external" href="https://configurate.aoeu.xyz/apidocs/ninja/leaping/configurate/ConfigurationOptions.html">ConfigurationOptions</a> to use as a parameter. Unless you want to use
features like custom type serialization, you can just use <a class="reference external" href="https://configurate.aoeu.xyz/apidocs/ninja/leaping/configurate/ConfigurationOptions.html#defaults--">ConfigurationOptions#defaults()</a> to create an
options object with default values.</p>
<p>Using the <a class="reference external" href="https://configurate.aoeu.xyz/apidocs/ninja/leaping/configurate/loader/ConfigurationLoader.html#load--">load()</a> method you can attempt to load the configuration contents from
the source specified upon creation of the <code class="docutils literal notranslate"><span class="pre">ConfigurationLoader</span></code>. It also expects a <code class="docutils literal notranslate"><span class="pre">ConfigurationOptions</span></code> instance,
but also provides a no-args form that is shorthand for
<a class="reference external" href="https://configurate.aoeu.xyz/apidocs/ninja/leaping/configurate/loader/ConfigurationLoader.html#load-ninja.leaping.configurate.ConfigurationOptions-">load(ConfigurationOptions.defaults())</a>.</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">java.io.IOException</span><span class="p">;</span>

<span class="n">Path</span> <span class="n">potentialFile</span> <span class="o">=</span> <span class="n">getConfigPath</span><span class="p">();</span>
<span class="n">ConfigurationLoader</span><span class="o">&lt;</span><span class="n">CommentedConfigurationNode</span><span class="o">&gt;</span> <span class="n">loader</span> <span class="o">=</span>
        <span class="n">HoconConfigurationLoader</span><span class="p">.</span><span class="na">builder</span><span class="p">().</span><span class="na">setPath</span><span class="p">(</span><span class="n">potentialFile</span><span class="p">).</span><span class="na">build</span><span class="p">();</span>
<span class="n">ConfigurationNode</span> <span class="n">rootNode</span><span class="p">;</span>
<span class="k">try</span> <span class="p">{</span>
    <span class="n">rootNode</span> <span class="o">=</span> <span class="n">loader</span><span class="p">.</span><span class="na">load</span><span class="p">();</span>
<span class="p">}</span> <span class="k">catch</span><span class="p">(</span><span class="n">IOException</span> <span class="n">e</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// handle error</span>
<span class="p">}</span>
</pre></div>
</div>
<p>If the <code class="docutils literal notranslate"><span class="pre">Path</span></code> given does not exist, the <code class="docutils literal notranslate"><span class="pre">load()</span></code> method will create an empty <code class="docutils literal notranslate"><span class="pre">ConfigurationNode</span></code>. Any other error
will lead to an <code class="docutils literal notranslate"><span class="pre">IOException</span></code> being thrown which you will need to handle properly.</p>
<p>If you have injected the default loader, it’s a good idea to get its <code class="docutils literal notranslate"><span class="pre">ConfigurationOptions</span></code>, since they contain the
ability to serialize and deserialize a large number of Sponge objects.</p>
<p>Once you modified your <code class="docutils literal notranslate"><span class="pre">ConfigurationNode</span></code> to hold the data you like to be saved, you can use the
<code class="docutils literal notranslate"><span class="pre">ConfigurationLoader</span></code> to save the node to the file specified while creating the loader. If that file does not exist,
it will be created. If it does exist, all contents will be overwritten.</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="k">try</span> <span class="p">{</span>
    <span class="n">loader</span><span class="p">.</span><span class="na">save</span><span class="p">(</span><span class="n">rootNode</span><span class="p">);</span>
<span class="p">}</span> <span class="k">catch</span><span class="p">(</span><span class="n">IOException</span> <span class="n">e</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// handle error</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Again, errors will be propagated as an <code class="docutils literal notranslate"><span class="pre">IOException</span></code> and must be handled.</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>We recommend saving the config after loading it (for the first time after an update) to ensure that newly
added or migrated configuration options are written to disk. If you need to save the config afterwards it is
strongly recommended to do this outside of the main thread. See also common <a class="reference internal" href="../practices/bad.html"><span class="doc">Bad Practices</span></a> you should
avoid.</p>
</div>
</section>
<section id="loading-a-default-config-from-the-plugin-jar-file">
<h2>Loading a Default Config from the Plugin Jar File<a class="headerlink" href="#loading-a-default-config-from-the-plugin-jar-file" title="Permalink to this headline">¶</a></h2>
<p>A popular way to provide a default configuration file with your plugin is to include a copy of it in your plugin jar,
copying it to the config directory when the config file has yet to be created.
You can use <a class="reference internal" href="../assets.html"><span class="doc">the Asset API</span></a> to do this, as shown in the example below:</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="n">PluginContainer</span> <span class="n">plugin</span> <span class="o">=</span> <span class="p">...;</span>
<span class="n">Path</span> <span class="n">path</span> <span class="o">=</span> <span class="p">...;</span>

<span class="n">Sponge</span><span class="p">.</span><span class="na">getAssetManager</span><span class="p">().</span><span class="na">getAsset</span><span class="p">(</span><span class="n">plugin</span><span class="p">,</span> <span class="s">&quot;default.conf&quot;</span><span class="p">).</span><span class="na">get</span><span class="p">().</span><span class="na">copyToFile</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="kc">false</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span>
<span class="n">loader</span> <span class="o">=</span> <span class="n">HoconConfigurationLoader</span><span class="p">.</span><span class="na">builder</span><span class="p">().</span><span class="na">setPath</span><span class="p">(</span><span class="n">path</span><span class="p">).</span><span class="na">build</span><span class="p">();</span>
<span class="n">rootNode</span> <span class="o">=</span> <span class="n">loader</span><span class="p">.</span><span class="na">load</span><span class="p">();</span>
</pre></div>
</div>
<p>For this example it is important to note that the <a class="reference external" href="https://jd.spongepowered.org/7.3.0/org/spongepowered/api/asset/AssetManager.html#getAsset-java.lang.String-">AssetManager#getAsset(String)</a> method works relative to the
plugin’s asset folder. So, if in the above example the plugin ID is <code class="docutils literal notranslate"><span class="pre">myplugin</span></code>, the <code class="docutils literal notranslate"><span class="pre">default.conf</span></code> file
must not lie in the jar file root, but instead in the directory <code class="docutils literal notranslate"><span class="pre">assets/myplugin</span></code>. This example also uses
<a class="reference external" href="https://jd.spongepowered.org/7.3.0/org/spongepowered/api/asset/Asset.html#copyToFile-java.nio.file.Path-boolean-boolean-">Asset#copyToFile(Path, boolean, boolean)</a> which allows the file creation to override existing
files only if specified.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If the config file cannot be found inside your plugin jar, then you will get a <code class="docutils literal notranslate"><span class="pre">NoSuchElementException</span></code> from the
<code class="docutils literal notranslate"><span class="pre">Optional&lt;Asset&gt;.get()</span></code> method. Please make sure that you configure your <a class="reference internal" href="../buildsystem.html"><span class="doc">build system</span></a>
to include it in the jar.</p>
</div>
<p>If you have an extra configuration class, you can use a much easier approach that also works if the only a part of your
config is missing. See also the examples on the <a class="reference internal" href="serialization.html"><span class="doc">Serializing Objects</span></a> page.</p>
</section>
<section id="updating-configuration-files-from-the-default-configuration">
<h2>Updating Configuration Files from the Default Configuration<a class="headerlink" href="#updating-configuration-files-from-the-default-configuration" title="Permalink to this headline">¶</a></h2>
<p>If you would like to merge new nodes and their values to your existing configuration file you can use your
<code class="docutils literal notranslate"><span class="pre">CommentedConfigurationNode</span></code> and load values from a given asset explained above. This will take each node in
your asset file and attempt to place it into the new root node if it does not exist. This method is different to simply
copying to a file as this will automatically place values that were absent while just copying to file will not.</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="n">PluginContainer</span> <span class="n">plugin</span> <span class="o">=</span> <span class="p">...;</span>

<span class="n">node</span><span class="p">.</span><span class="na">mergeValuesFrom</span><span class="p">(</span><span class="n">HoconConfigurationLoader</span><span class="p">.</span><span class="na">builder</span><span class="p">()</span>
                    <span class="p">.</span><span class="na">setURL</span><span class="p">(</span><span class="n">plugin</span><span class="p">.</span><span class="na">getAsset</span><span class="p">(</span><span class="s">&quot;default.conf&quot;</span><span class="p">).</span><span class="na">get</span><span class="p">().</span><span class="na">getUrl</span><span class="p">())</span>
                    <span class="p">.</span><span class="na">build</span><span class="p">()</span>
                    <span class="p">.</span><span class="na">load</span><span class="p">(</span><span class="n">ConfigurationOptions</span><span class="p">.</span><span class="na">defaults</span><span class="p">()));</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This will not change the values of preexisting configuration nodes if they are already present, so this method can
be called regardless of whether or not the server already has a previous version of your configuration.</p>
</div>
</section>
</section>

           </div>
          </div><footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="nodes.html" class="btn btn-neutral float-right" title="Configuration Nodes" accesskey="n" rel="next">Next <span class="fa fa-angle-right"></span></a>
        <a href="index.html" class="btn btn-neutral" title="Configuring Plugins" accesskey="p" rel="prev"><span class="fa fa-angle-left"></span> Previous</a>
    </div>

    <hr/>

    <section id="license-footer">
        <p>Except where otherwise noted,
            <a xmlns:dct="http://purl.org/dc/terms/" xmlns:cc="http://creativecommons.org/ns#" property="dct:title" rel="cc:attributionURL" href="https://github.com/SpongePowered/SpongeDocs">SpongeDocs</a>
            is licensed under a <a rel="license" href="https://creativecommons.org/licenses/by-sa/4.0/">Creative Commons Attribution-ShareAlike 4.0 International License</a>.
        </p>
        <a id="license-icons" rel="license" href="https://creativecommons.org/licenses/by-sa/4.0/" title="CC-BY-SA" aria-hidden="true">cba</a>
    </section>
</footer>        </div>      </div>

    </section>

  </div>


<div class="rst-versions" data-toggle="rst-versions" role="note" aria-label="versions">
    <span class="rst-current-version" data-toggle="rst-current-version">
        <i class="fa fa-book"> <span>SpongeDocs</span></i>
        v: 7.3.0
        <span class="fa fa-caret-down"></span>
    </span>
    <div id="versions" class="rst-other-versions">




            <dl>
                <dt>Contribute</dt>
                    <dd><a href="https://github.com/SpongePowered/SpongeDocs/blob/zebra-mango-llama/source/plugin/configuration/loaders.rst">Source</a></dd>
                    <dd><a href="https://github.com/SpongePowered/SpongeDocs/edit/zebra-mango-llama/source/plugin/configuration/loaders.rst">Edit</a></dd>
            </dl>
    </div>
</div>
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

 
</body>
</html>
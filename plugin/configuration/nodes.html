
<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Configuration Nodes &mdash; Sponge 7.2.0 documentation</title>

    <link rel="shortcut icon" href="../../_static/favicon.ico"/>




    <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />

    <link rel="stylesheet" href="../../_static/spongedocs.css" type="text/css" />

        <link rel="index" title="Index"
              href="../../genindex.html"/>        <link rel="search" title="Search" href="../../search.html"/>    <link rel="top" title="Sponge 7.2.0 documentation" href="../../index.html"/>        <link rel="up" title="Configuring Plugins" href="index.html"/>        <link rel="next" title="Serializing Objects" href="serialization.html"/>        <link rel="prev" title="Configuration Loaders" href="loaders.html"/>
    <!-- Google Analytics -->
    <script>
        (function(S,p,o,n,g,i,e){S['GoogleAnalyticsObject']=g;S[g]=S[g]||function(){
        (S[g].q=S[g].q||[]).push(arguments)},S[g].l=1*new Date();i=p.createElement(o),
        e=p.getElementsByTagName(o)[0];i.async=1;i.src=n;e.parentNode.insertBefore(i,e)
        })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

        ga('create', 'UA-59476017-2', 'auto');
        ga('send', 'pageview');
    </script>

  <script src="../../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
    <div id="sp-logo-container" class="page-scroll">
        <a class="logo" href="../../index.html">
            <img src="../../_static/spongie-mark-dark.svg">
            <span>Sponge</span>
            <i class="fa fa-fw fa-chevron-down"></i>
        </a>
        <div id="sp-logo-menu">
            <ul id="sp-logo-dropdown">
                <li><a href="https://www.spongepowered.org"><i class="fa-fw fa fa-home"></i>Homepage</a></li>
                <li><a href="https://forums.spongepowered.org"><i class="fa-fw fa fa-comments"></i>Forums</a></li>
                <li><a href="https://github.com/SpongePowered"><i class="fa-fw fa fa-code"></i>Code</a></li>
                <li class="active"><a href="https://docs.spongepowered.org"><i class="fa-fw fa fa-book"></i>Docs</a></li>
                <li><a href="https://jd.spongepowered.org"><i class="fa-fw fa fa-graduation-cap"></i>Javadocs</a></li>
                <li><a href="https://forums.spongepowered.org/c/plugins/plugin-releases"><i class="fa-fw fa fa-plug"></i>Plugins</a></li>
                <li><a href="https://ore.spongepowered.org"><img src="../../_static/ore.svg" alt="" class="fa-fw fa ore-logo">Ore <sup>Beta</sup></a></li>
                <li><a href="https://www.spongepowered.org/downloads"><i class="fa-fw fa fa-download"></i>Downloads</a></li>
                <li><a href="https://www.spongepowered.org/chat"><i class="fa-fw fa fa-comment"></i>Chat</a></li>
            </ul>
        </div>
    </div>

<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
                <ul>
<li class="toctree-l1"><a class="reference internal" href="../../server/index.html">Creating a Server</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../versions/index.html">Versioning Policy</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../preparing/index.html">Preparing for Development</a></li>
</ul>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">Creating a Plugin</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../api-versions.html">API-Versions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../buildsystem.html">Build Systems</a></li>
<li class="toctree-l2"><a class="reference internal" href="../workspace/index.html">Setting Up Your Workspace</a></li>
<li class="toctree-l2"><a class="reference internal" href="../project/index.html">Setting Up Your Project</a></li>
<li class="toctree-l2"><a class="reference internal" href="../plugin-identifier.html">Plugin Identifiers</a></li>
<li class="toctree-l2"><a class="reference internal" href="../plugin-class.html">Main Plugin Class</a></li>
<li class="toctree-l2"><a class="reference internal" href="../lifecycle.html">Plugin Lifecycle</a></li>
<li class="toctree-l2"><a class="reference internal" href="../injection.html">Dependency Injection</a></li>
<li class="toctree-l2"><a class="reference internal" href="../practices/index.html">Practices</a></li>
<li class="toctree-l2"><a class="reference internal" href="../optional/index.html">Optionals</a></li>
<li class="toctree-l2"><a class="reference internal" href="../logging.html">Logging and Debugging</a></li>
<li class="toctree-l2"><a class="reference internal" href="../text/index.html">Text</a></li>
<li class="toctree-l2"><a class="reference internal" href="../commands/index.html">Plugin Commands</a></li>
<li class="toctree-l2"><a class="reference internal" href="../event/index.html">Events</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="index.html">Configuring Plugins</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="loaders.html">Configuration Loaders</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">Configuration Nodes</a></li>
<li class="toctree-l3"><a class="reference internal" href="serialization.html">Serializing Objects</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../assets.html">The Asset API</a></li>
<li class="toctree-l2"><a class="reference internal" href="../data/index.html">The Data API</a></li>
<li class="toctree-l2"><a class="reference internal" href="../blocks/index.html">Blocks</a></li>
<li class="toctree-l2"><a class="reference internal" href="../entities/index.html">Entities</a></li>
<li class="toctree-l2"><a class="reference internal" href="../items/index.html">Items</a></li>
<li class="toctree-l2"><a class="reference internal" href="../trade-offers.html">Trade-Offers</a></li>
<li class="toctree-l2"><a class="reference internal" href="../effects.html">Effects</a></li>
<li class="toctree-l2"><a class="reference internal" href="../scheduler.html">Scheduler</a></li>
<li class="toctree-l2"><a class="reference internal" href="../services.html">Services</a></li>
<li class="toctree-l2"><a class="reference internal" href="../database.html">Databases</a></li>
<li class="toctree-l2"><a class="reference internal" href="../permissions.html">Permissions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../bans.html">Bans</a></li>
<li class="toctree-l2"><a class="reference internal" href="../metrics.html">Metrics Collection</a></li>
<li class="toctree-l2"><a class="reference internal" href="../bookview.html">Book Views</a></li>
<li class="toctree-l2"><a class="reference internal" href="../economy/index.html">Economy</a></li>
<li class="toctree-l2"><a class="reference internal" href="../wgen/index.html">World Generation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../manager.html">Plugin Manager</a></li>
<li class="toctree-l2"><a class="reference internal" href="../game-profile-manager.html">Game Profile Manager</a></li>
<li class="toctree-l2"><a class="reference internal" href="../offline-userplayer-data.html">Offline Player Data</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tab-lists.html">Tab Lists</a></li>
<li class="toctree-l2"><a class="reference internal" href="../plugin-meta.html">Plugin Metadata</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ray-tracing.html">Ray Tracing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../debugging.html">Plugin Debugging</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tutorials.html">Tutorials</a></li>
<li class="toctree-l2"><a class="reference internal" href="../internals/index.html">Implementation-dependent Plugins</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../ore/index.html">Ore Documentation</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../contributing/index.html">Contributing to Sponge</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../about/index.html">About the Sponge Project</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../../index.html">Sponge</a>
      </nav>


      <div class="wy-nav-content">
        <div class="rst-content">

 

<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../../index.html">Docs</a> &raquo;</li>
          <li><a href="../index.html">Creating a Plugin</a> &raquo;</li>
          <li><a href="index.html">Configuring Plugins</a> &raquo;</li>
    <li>Configuration Nodes</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../_sources/plugin/configuration/nodes.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
  <div class="section" id="configuration-nodes">
<h1>Configuration Nodes<a class="headerlink" href="#configuration-nodes" title="Permalink to this headline">¶</a></h1>
<p>In memory, the configuration is represented using <a class="reference external" href="https://configurate.aoeu.xyz/apidocs/ninja/leaping/configurate/ConfigurationNode.html">ConfigurationNode</a>s. A <code class="docutils literal notranslate"><span class="pre">ConfigurationNode</span></code> either holds
a value (like a number, a string or a list) or has child nodes, a tree-like configuration structure. When using a
<a class="reference external" href="https://configurate.aoeu.xyz/apidocs/ninja/leaping/configurate/loader/ConfigurationLoader.html">ConfigurationLoader</a> to load or create new configurations, it will return the <strong>root node</strong>. We
recommend that you always keep a reference to that root node stored somewhere, to prevent loading the configuration
every time you need to access it. As a side effect, this will keep the comments that were present in the file.
As an alternative, you could store a reference to a <a class="reference internal" href="serialization.html"><span class="doc">serializable config instance</span></a> that holds the
entire configuration of your plugin.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Depending on the <code class="docutils literal notranslate"><span class="pre">ConfigurationLoader</span></code> used, you might even get a <a class="reference external" href="https://configurate.aoeu.xyz/apidocs/ninja/leaping/configurate/commented/CommentedConfigurationNode.html">CommentedConfigurationNode</a>, which in
addition to normal <code class="docutils literal notranslate"><span class="pre">ConfigurationNode</span></code> behavior is able to retain a comment that will persist on the saved config
file.</p>
</div>
<div class="section" id="navigating-nodes">
<h2>Navigating Nodes<a class="headerlink" href="#navigating-nodes" title="Permalink to this headline">¶</a></h2>
<p>Every child node is identified by a key, most commonly a string. When going from one node (for example the root node)
to a specific child node, it may be necessary to move through multiple layers of child nodes. The keys of the child
nodes passed make up the <strong>path</strong> of the target node. In the following example, there is a node holding the value
<code class="docutils literal notranslate"><span class="pre">false</span></code> at the path <code class="docutils literal notranslate"><span class="pre">modules</span></code> <code class="docutils literal notranslate"><span class="pre">blockCheats</span></code> <code class="docutils literal notranslate"><span class="pre">enabled</span></code> (from the root node) in the following HOCON representation
of a config.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">When written down, paths are commonly represented by joining the keys together with a separator char, usually <code class="docutils literal notranslate"><span class="pre">.</span></code>.
The above mentioned path would be written <code class="docutils literal notranslate"><span class="pre">modules.blockCheats.enabled</span></code>.</p>
</div>
<div class="highlight-guess notranslate"><div class="highlight"><pre><span></span><span class="err">modules {</span>
<span class="err">    blockCheats {</span>
<span class="err">        enabled=true</span>
<span class="err">    }</span>
<span class="err">}</span>
</pre></div>
</div>
<p>In Java, you can get the child node for a path using the <code class="docutils literal notranslate"><span class="pre">getNode(...)</span></code> method. The method accepts any number of
arguments, where each argument is one key in the path. The path <code class="docutils literal notranslate"><span class="pre">modules.blockCheats.enabled</span></code> from a root node is
acquired as follows.</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">ninja.leaping.configurate.ConfigurationNode</span><span class="p">;</span>

<span class="n">ConfigurationNode</span> <span class="n">rootNode</span> <span class="o">=</span> <span class="p">...;</span>
<span class="n">ConfigurationNode</span> <span class="n">targetNode</span> <span class="o">=</span> <span class="n">rootNode</span><span class="p">.</span><span class="na">getNode</span><span class="p">(</span><span class="s">&quot;modules&quot;</span><span class="p">,</span> <span class="s">&quot;blockCheats&quot;</span><span class="p">,</span> <span class="s">&quot;enabled&quot;</span><span class="p">);</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The function calls <code class="docutils literal notranslate"><span class="pre">node.getNode(&quot;foo&quot;,</span> <span class="pre">&quot;bar&quot;)</span></code> and <code class="docutils literal notranslate"><span class="pre">node.getNode(&quot;foo&quot;).getNode(&quot;bar&quot;)</span></code> are equivalent.</p>
</div>
</div>
<div class="section" id="values">
<h2>Values<a class="headerlink" href="#values" title="Permalink to this headline">¶</a></h2>
<div class="section" id="basic-values">
<h3>Basic Values<a class="headerlink" href="#basic-values" title="Permalink to this headline">¶</a></h3>
<p>Basic value types like <code class="docutils literal notranslate"><span class="pre">int</span></code>, <code class="docutils literal notranslate"><span class="pre">double</span></code>, <code class="docutils literal notranslate"><span class="pre">boolean</span></code> or <code class="docutils literal notranslate"><span class="pre">String</span></code> each have their own convenience getter method
which will return the value or a default if the node does not contain a value of that type. Let’s check if the server
administrator wants our plugin to enable its blockCheats module by checking the value at the
<code class="docutils literal notranslate"><span class="pre">modules.blockCheats.enabled</span></code> path.</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="kt">boolean</span> <span class="n">shouldEnable</span> <span class="o">=</span> <span class="n">rootNode</span><span class="p">.</span><span class="na">getNode</span><span class="p">(</span><span class="s">&quot;modules&quot;</span><span class="p">,</span> <span class="s">&quot;blockCheats&quot;</span><span class="p">,</span> <span class="s">&quot;enabled&quot;</span><span class="p">).</span><span class="na">getBoolean</span><span class="p">();</span>
</pre></div>
</div>
<p>Yes, it’s really as simple as that. Similar to the above example, methods like <a class="reference external" href="https://configurate.aoeu.xyz/apidocs/ninja/leaping/configurate/ConfigurationNode.html#getInt--">ConfigurationNode#getInt()</a>,
<a class="reference external" href="https://configurate.aoeu.xyz/apidocs/ninja/leaping/configurate/ConfigurationNode.html#getDouble--">ConfigurationNode#getDouble()</a> or <a class="reference external" href="https://configurate.aoeu.xyz/apidocs/ninja/leaping/configurate/ConfigurationNode.html#getString--">ConfigurationNode#getString()</a> exist that allow you to
conveniently grab a value of that type.</p>
<p>To set a basic value to a node, just use the <a class="reference external" href="https://configurate.aoeu.xyz/apidocs/ninja/leaping/configurate/ConfigurationNode.html#setValue-java.lang.Object-">ConfigurationNode#setValue(Object)</a> method. Don’t be confused
that it accepts an <a class="reference external" href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html">Object</a> - this means that it can take anything and will determine how to proceed from there
by itself.</p>
<p>Imagine the blockCheats module is deactivated by a user command. This change will need to be reflected in the config
and can be done as follows:</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="n">rootNode</span><span class="p">.</span><span class="na">getNode</span><span class="p">(</span><span class="s">&quot;modules&quot;</span><span class="p">,</span> <span class="s">&quot;blockCheats&quot;</span><span class="p">,</span> <span class="s">&quot;enabled&quot;</span><span class="p">).</span><span class="na">setValue</span><span class="p">(</span><span class="kc">false</span><span class="p">);</span>
</pre></div>
</div>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">Anything other than basic value types cannot be handled by those basic functions, and must instead be read and
written using the (de)serializing Methods described below. Basic types are those that are natively handled by the
underlying implementation of the file format used by the <code class="docutils literal notranslate"><span class="pre">ConfigurationLoader</span></code>, but generally include the
primitive data types, <code class="docutils literal notranslate"><span class="pre">String</span></code>s as well as <code class="docutils literal notranslate"><span class="pre">List</span></code>s and <code class="docutils literal notranslate"><span class="pre">Map</span></code>s of basic types.</p>
</div>
</div>
<div class="section" id="de-serialization">
<h3>(De)Serialization<a class="headerlink" href="#de-serialization" title="Permalink to this headline">¶</a></h3>
<p>If you attempt to read or write an object that is not one of the basic types mentioned above, you will need to pass it
through deserialization first. In the <a class="reference external" href="https://configurate.aoeu.xyz/apidocs/ninja/leaping/configurate/ConfigurationOptions.html">ConfigurationOptions</a> used to create your root <code class="docutils literal notranslate"><span class="pre">ConfigurationNode</span></code>,
there is a collection of <a class="reference external" href="https://configurate.aoeu.xyz/apidocs/ninja/leaping/configurate/objectmapping/serialize/TypeSerializer.html">TypeSerializer</a>s that Configurate uses to convert your objects to a
<code class="docutils literal notranslate"><span class="pre">ConfigurationNode</span></code> and vice versa.</p>
<p>In order to tell Configurate what type it is dealing with, we have to provide a guava <a class="reference external" href="https://google.github.io/guava/releases/17.0/api/docs/com/google/common/reflect/TypeToken.html">TypeToken</a>. Imagine we
want to read a player <a class="reference external" href="https://docs.oracle.com/javase/8/docs/api/java/util/UUID.html">UUID</a> from the config node <code class="docutils literal notranslate"><span class="pre">towns.aFLARDia.mayor</span></code>. To do so, we need to call the
<a class="reference external" href="https://configurate.aoeu.xyz/apidocs/ninja/leaping/configurate/ConfigurationNode.html#getValue-com.google.common.reflect.TypeToken-">getValue(…)</a> method while providing a <code class="docutils literal notranslate"><span class="pre">TypeToken</span></code>
representing the <code class="docutils literal notranslate"><span class="pre">UUID</span></code> class.</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">java.util.UUID</span><span class="p">;</span>

<span class="n">UUID</span> <span class="n">mayor</span> <span class="o">=</span> <span class="n">rootNode</span><span class="p">.</span><span class="na">getNode</span><span class="p">(</span><span class="s">&quot;towns&quot;</span><span class="p">,</span> <span class="s">&quot;aFLARDia&quot;</span><span class="p">,</span> <span class="s">&quot;mayor&quot;</span><span class="p">).</span><span class="na">getValue</span><span class="p">(</span><span class="n">TypeToken</span><span class="p">.</span><span class="na">of</span><span class="p">(</span><span class="n">UUID</span><span class="p">.</span><span class="na">class</span><span class="p">));</span>
</pre></div>
</div>
<p>This prompts Configurate to locate the proper <code class="docutils literal notranslate"><span class="pre">TypeSerializer</span></code> for <code class="docutils literal notranslate"><span class="pre">UUID</span></code>s and then use it to convert the stored
value into a <code class="docutils literal notranslate"><span class="pre">UUID</span></code>. The <code class="docutils literal notranslate"><span class="pre">TypeSerializer</span></code> (and by extension the above method) may throw an
<a class="reference external" href="https://configurate.aoeu.xyz/apidocs/ninja/leaping/configurate/objectmapping/ObjectMappingException.html">ObjectMappingException</a> if it encounters incomplete or invalid data.</p>
<p>Now if we want to write a new <code class="docutils literal notranslate"><span class="pre">UUID</span></code> to that config node, the syntax is very similar. Use the
<a class="reference external" href="https://configurate.aoeu.xyz/apidocs/ninja/leaping/configurate/ConfigurationNode.html#setValue-com.google.common.reflect.TypeToken-java.lang.Object-">setValue(…)</a>
method with a <code class="docutils literal notranslate"><span class="pre">TypeToken</span></code> and the object you want to serialize.</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="n">rootNode</span><span class="p">.</span><span class="na">getNode</span><span class="p">(</span><span class="s">&quot;towns&quot;</span><span class="p">,</span><span class="s">&quot;aFLARDia&quot;</span><span class="p">,</span> <span class="s">&quot;mayor&quot;</span><span class="p">).</span><span class="na">setValue</span><span class="p">(</span><span class="n">TypeToken</span><span class="p">.</span><span class="na">of</span><span class="p">(</span><span class="n">UUID</span><span class="p">.</span><span class="na">class</span><span class="p">),</span> <span class="n">newUuid</span><span class="p">);</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Serializing a value will throw an <code class="docutils literal notranslate"><span class="pre">ObjectMappingException</span></code> if no <code class="docutils literal notranslate"><span class="pre">TypeSerializer</span></code> for the given <code class="docutils literal notranslate"><span class="pre">TypeToken</span></code>
can be found.</p>
</div>
<p>For simple classes like <code class="docutils literal notranslate"><span class="pre">UUID</span></code>, you can just create a <code class="docutils literal notranslate"><span class="pre">TypeToken</span></code> using the static <a class="reference external" href="https://google.github.io/guava/releases/17.0/api/docs/com/google/common/reflect/TypeToken.html#of-java.lang.Class-">TypeToken#of(Class)</a>
method. However, <code class="docutils literal notranslate"><span class="pre">UUID</span></code>s and some other types already have a constant for it, such as
<a class="reference external" href="https://jd.spongepowered.org/7.2.0/org/spongepowered/api/util/TypeTokens.html#UUID_TOKEN">TypeTokens#UUID_TOKEN</a>, which you should use instead. If the class you want to use has type parameters (like
<code class="docutils literal notranslate"><span class="pre">Map&lt;String,UUID&gt;</span></code>) and no constant yet exists for it, the syntax gets a bit more complicated. In most cases you will
know exactly what the type parameters will be at compile time, so you can just create the <code class="docutils literal notranslate"><span class="pre">TypeToken</span></code> as an anonymous
class: <code class="docutils literal notranslate"><span class="pre">new</span> <span class="pre">TypeToken&lt;Map&lt;String,UUID&gt;&gt;()</span> <span class="pre">{}</span></code>. That way, even generic types can conveniently be written and read.</p>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last">For more information about <code class="docutils literal notranslate"><span class="pre">TypeToken</span></code>s, refer to the <a class="reference external" href="https://github.com/google/guava/wiki/ReflectionExplained">guava documentation</a></p>
</div>
<div class="admonition tip">
<p class="first admonition-title">Tip</p>
<p class="last">The SpongeAPI provides a <a class="reference external" href="https://jd.spongepowered.org/7.2.0/org/spongepowered/api/util/TypeTokens.html">class</a> with many pre-defined type tokens that you can use.
If plugin developers need many different or complex <code class="docutils literal notranslate"><span class="pre">TypeToken</span></code>s, or use them frequently, we recommend
creating a similar class for themselves to improve code readability. (Beware, it is not guaranteed that all of
those entries have registered <code class="docutils literal notranslate"><span class="pre">TypeSerializer</span></code>s).</p>
</div>
<p>You can find a non-exhaustive list of supported types, and ways to add support for new types on the
<a class="reference internal" href="serialization.html"><span class="doc">the config serialization page</span></a>.</p>
</div>
<div class="section" id="defaults">
<h3>Defaults<a class="headerlink" href="#defaults" title="Permalink to this headline">¶</a></h3>
<p>Unlike SpongeAPI, the Configurate library does not use <code class="docutils literal notranslate"><span class="pre">Optional</span></code> for values that might not be present but null.
While the getters for primitive methods (like <code class="docutils literal notranslate"><span class="pre">getBoolean()</span></code> or <code class="docutils literal notranslate"><span class="pre">getInt()</span></code>) might return <code class="docutils literal notranslate"><span class="pre">false</span></code> or <code class="docutils literal notranslate"><span class="pre">0</span></code>, those
that would return an object (like <code class="docutils literal notranslate"><span class="pre">getString()</span></code>) will return <code class="docutils literal notranslate"><span class="pre">null</span></code> if no value is present. If you do not want to
manually handle those special cases, you can use <em>default values</em>. Every <code class="docutils literal notranslate"><span class="pre">getXXX()</span></code> method discussed above has an
overloaded form accepting an additional parameter as a default value.</p>
<p>Let us take a look at the example for reading a boolean value again.</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="kt">boolean</span> <span class="n">shouldEnable</span> <span class="o">=</span> <span class="n">rootNode</span><span class="p">.</span><span class="na">getNode</span><span class="p">(</span><span class="s">&quot;modules&quot;</span><span class="p">,</span> <span class="s">&quot;blockCheats&quot;</span><span class="p">,</span> <span class="s">&quot;enabled&quot;</span><span class="p">).</span><span class="na">getBoolean</span><span class="p">();</span>
</pre></div>
</div>
<p>This call will return <code class="docutils literal notranslate"><span class="pre">false</span></code> if either the value <code class="docutils literal notranslate"><span class="pre">false</span></code> is saved in the config or the value is not present in the
config. Since those two cases are indistinguishable we have no simple way of setting our variable to <code class="docutils literal notranslate"><span class="pre">false</span></code> only if
that is the value specified on the config. Unless we specify <code class="docutils literal notranslate"><span class="pre">true</span></code> as the default value.</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="kt">boolean</span> <span class="n">shouldEnable</span> <span class="o">=</span> <span class="n">rootNode</span><span class="p">.</span><span class="na">getNode</span><span class="p">(</span><span class="s">&quot;modules&quot;</span><span class="p">,</span> <span class="s">&quot;blockCheats&quot;</span><span class="p">,</span> <span class="s">&quot;enabled&quot;</span><span class="p">).</span><span class="na">getBoolean</span><span class="p">(</span><span class="kc">true</span><span class="p">);</span>
</pre></div>
</div>
<p>Similarly, you can specify defaults on any value you get from the config, thus avoiding <code class="docutils literal notranslate"><span class="pre">null</span></code> returns or
<code class="docutils literal notranslate"><span class="pre">ObjectMappingException</span></code> caused by the absence of the whole value. It also works on the deserializing <code class="docutils literal notranslate"><span class="pre">getValue()</span></code>
method. Some examples:</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="n">String</span> <span class="n">greeting</span> <span class="o">=</span> <span class="n">rootNode</span><span class="p">.</span><span class="na">getNode</span><span class="p">(</span><span class="s">&quot;messages&quot;</span><span class="p">,</span> <span class="s">&quot;greeting&quot;</span><span class="p">)</span>
        <span class="p">.</span><span class="na">getString</span><span class="p">(</span><span class="s">&quot;FLARD be with you good man!&quot;</span><span class="p">);</span>

<span class="n">UUID</span> <span class="n">mayor</span> <span class="o">=</span> <span class="n">rootNode</span><span class="p">.</span><span class="na">getNode</span><span class="p">(</span><span class="s">&quot;towns&quot;</span><span class="p">,</span> <span class="s">&quot;aFLARDia&quot;</span><span class="p">,</span> <span class="s">&quot;mayor&quot;</span><span class="p">)</span>
        <span class="p">.</span><span class="na">getValue</span><span class="p">(</span><span class="n">TypeTokens</span><span class="p">.</span><span class="na">UUID_TOKEN</span><span class="p">,</span> <span class="n">somePlayer</span><span class="p">.</span><span class="na">getUniqueId</span><span class="p">());</span>
</pre></div>
</div>
<p>Another useful application of those defaults is that they can be copied to your configuration if needed. Upon creation
of your root configuration node, you can create your <code class="docutils literal notranslate"><span class="pre">ConfigurationOptions</span></code> with
<a class="reference external" href="https://configurate.aoeu.xyz/apidocs/ninja/leaping/configurate/ConfigurationOptions.html#setShouldCopyDefaults-boolean-">setShouldCopyDefaults(true)</a>.
Subsequently, whenever you provide a default value, Configurate will first check if the value you’re trying to get is
present, and if it is not, it will first write your default value to the node before returning the default value.</p>
<p>Let’s assume your plugin is running for the first time and the config file does not exist yet. You try to load it
with <code class="docutils literal notranslate"><span class="pre">ConfigurationOptions</span></code> that enable copying of default values and get an empty config node. Now you run the
line <code class="docutils literal notranslate"><span class="pre">rootNode.getNode(&quot;modules&quot;,</span> <span class="pre">&quot;blockCheats&quot;,</span> <span class="pre">&quot;enabled&quot;).getBoolean(true)</span></code>. As the node does not yet exist,
configurate creates it and writes the value <code class="docutils literal notranslate"><span class="pre">true</span></code> to it as per the <code class="docutils literal notranslate"><span class="pre">ConfigurationOptions</span></code> before returning it.
When the config is then finished, the value <code class="docutils literal notranslate"><span class="pre">true</span></code> will persist on the node without ever being explicitly set.</p>
</div>
</div>
</div>

           </div>
          </div>
<footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="serialization.html" class="btn btn-neutral float-right" title="Serializing Objects" accesskey="n" rel="next">Next <span class="fa fa-angle-right"></span></a>
        <a href="loaders.html" class="btn btn-neutral" title="Configuration Loaders" accesskey="p" rel="prev"><span class="fa fa-angle-left"></span> Previous</a>
    </div>

    <hr/>

    <section id="license-footer">
        <p>Except where otherwise noted,
            <a xmlns:dct="http://purl.org/dc/terms/" xmlns:cc="http://creativecommons.org/ns#" property="dct:title" rel="cc:attributionURL" href="https://github.com/SpongePowered/SpongeDocs">SpongeDocs</a>
            is licensed under a <a rel="license" href="https://creativecommons.org/licenses/by-sa/4.0/">Creative Commons Attribution-ShareAlike 4.0 International License</a>.
        </p>
        <a id="license-icons" rel="license" href="https://creativecommons.org/licenses/by-sa/4.0/" title="CC-BY-SA" aria-hidden="true">cba</a>
    </section>
</footer>        </div>
      </div>

    </section>

  </div>


<div class="rst-versions" data-toggle="rst-versions" role="note" aria-label="versions">
    <span class="rst-current-version" data-toggle="rst-current-version">
        <i class="fa fa-book"> <span>SpongeDocs</span></i>
        v: 7.2.0
        <span class="fa fa-caret-down"></span>
    </span>
    <div id="versions" class="rst-other-versions">




    </div>
</div>

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../../',
            VERSION:'7.2.0',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>      <script type="text/javascript" src="../../_static/jquery.js"></script>      <script type="text/javascript" src="../../_static/underscore.js"></script>      <script type="text/javascript" src="../../_static/doctools.js"></script>      <script type="text/javascript" src="../../_static/language_data.js"></script>      <script type="text/javascript" src="../../_static/spongedocs.js"></script>

    <script type="text/javascript" src="../../_static/js/theme.js"></script>

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
 
</body>
</html>
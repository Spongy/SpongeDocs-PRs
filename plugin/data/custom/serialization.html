
<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Serializing Custom Data &mdash; Sponge 7.2.0 documentation</title>

    <link rel="shortcut icon" href="../../../_static/favicon.ico"/>




    <link rel="stylesheet" href="../../../_static/css/theme.css" type="text/css" />

    <link rel="stylesheet" href="../../../_static/spongedocs.css" type="text/css" />

        <link rel="index" title="Index"
              href="../../../genindex.html"/>        <link rel="search" title="Search" href="../../../search.html"/>    <link rel="top" title="Sponge 7.2.0 documentation" href="../../../index.html"/>        <link rel="up" title="Custom Data" href="index.html"/>        <link rel="next" title="Catalog Types" href="../catalog-types.html"/>        <link rel="prev" title="Custom DataHolders" href="dataholders.html"/>
    <!-- Google Analytics -->
    <script>
        (function(S,p,o,n,g,i,e){S['GoogleAnalyticsObject']=g;S[g]=S[g]||function(){
        (S[g].q=S[g].q||[]).push(arguments)},S[g].l=1*new Date();i=p.createElement(o),
        e=p.getElementsByTagName(o)[0];i.async=1;i.src=n;e.parentNode.insertBefore(i,e)
        })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

        ga('create', 'UA-59476017-2', 'auto');
        ga('send', 'pageview');
    </script>

  <script src="../../../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
    <div id="sp-logo-container" class="page-scroll">
        <a class="logo" href="../../../index.html">
            <img src="../../../_static/spongie-mark-dark.svg">
            <span>Sponge</span>
            <i class="fa fa-fw fa-chevron-down"></i>
        </a>
        <div id="sp-logo-menu">
            <ul id="sp-logo-dropdown">
                <li><a href="https://www.spongepowered.org"><i class="fa-fw fa fa-home"></i>Homepage</a></li>
                <li><a href="https://forums.spongepowered.org"><i class="fa-fw fa fa-comments"></i>Forums</a></li>
                <li><a href="https://github.com/SpongePowered"><i class="fa-fw fa fa-code"></i>Code</a></li>
                <li class="active"><a href="https://docs.spongepowered.org"><i class="fa-fw fa fa-book"></i>Docs</a></li>
                <li><a href="https://jd.spongepowered.org"><i class="fa-fw fa fa-graduation-cap"></i>Javadocs</a></li>
                <li><a href="https://forums.spongepowered.org/c/plugins/plugin-releases"><i class="fa-fw fa fa-plug"></i>Plugins</a></li>
                <li><a href="https://ore.spongepowered.org"><img src="../../../_static/ore.svg" alt="" class="fa-fw fa ore-logo">Ore <sup>Beta</sup></a></li>
                <li><a href="https://www.spongepowered.org/downloads"><i class="fa-fw fa fa-download"></i>Downloads</a></li>
                <li><a href="https://www.spongepowered.org/chat"><i class="fa-fw fa fa-comment"></i>Chat</a></li>
            </ul>
        </div>
    </div>

<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
                <ul>
<li class="toctree-l1"><a class="reference internal" href="../../../server/index.html">Creating a Server</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../versions/index.html">Versioning Policy</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../preparing/index.html">Preparing for Development</a></li>
</ul>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../../index.html">Creating a Plugin</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../../api-versions.html">API-Versions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../buildsystem.html">Build Systems</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../workspace/index.html">Setting Up Your Workspace</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../project/index.html">Setting Up Your Project</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../plugin-identifier.html">Plugin Identifiers</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../plugin-class.html">Main Plugin Class</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../lifecycle.html">Plugin Lifecycle</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../injection.html">Dependency Injection</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../practices/index.html">Practices</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../optional/index.html">Optionals</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../logging.html">Logging and Debugging</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../text/index.html">Text</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../commands/index.html">Plugin Commands</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../event/index.html">Events</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../configuration/index.html">Configuring Plugins</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../assets.html">The Asset API</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../index.html">The Data API</a><ul class="current">
<li class="toctree-l3 current"><a class="reference internal" href="index.html">Custom Data</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="datamanipulators.html">Custom DataManipulators</a></li>
<li class="toctree-l4"><a class="reference internal" href="dataholders.html">Custom DataHolders</a></li>
<li class="toctree-l4 current"><a class="current reference internal" href="#">Serializing Custom Data</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../catalog-types.html">Catalog Types</a></li>
<li class="toctree-l3"><a class="reference internal" href="../keys.html">Using Keys</a></li>
<li class="toctree-l3"><a class="reference internal" href="../datamanipulators.html">Data Manipulators</a></li>
<li class="toctree-l3"><a class="reference internal" href="../transactions.html">Transactions</a></li>
<li class="toctree-l3"><a class="reference internal" href="../serialization.html">Serializing Data</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../blocks/index.html">Blocks</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../entities/index.html">Entities</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../items/index.html">Items</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../trade-offers.html">Trade-Offers</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../effects.html">Effects</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../scheduler.html">Scheduler</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../services.html">Services</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../database.html">Databases</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../permissions.html">Permissions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../bans.html">Bans</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../metrics.html">Metrics Collection</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../bookview.html">Book Views</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../economy/index.html">Economy</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../wgen/index.html">World Generation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../manager.html">Plugin Manager</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../game-profile-manager.html">Game Profile Manager</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../offline-userplayer-data.html">Offline Player Data</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../tab-lists.html">Tab Lists</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../plugin-meta.html">Plugin Metadata</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../ray-tracing.html">Ray Tracing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../debugging.html">Plugin Debugging</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../tutorials.html">Tutorials</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../internals/index.html">Implementation-dependent Plugins</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../ore/index.html">Ore Documentation</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../contributing/index.html">Contributing to Sponge</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../about/index.html">About the Sponge Project</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../../../index.html">Sponge</a>
      </nav>


      <div class="wy-nav-content">
        <div class="rst-content">

 

<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../../../index.html">Docs</a> &raquo;</li>
          <li><a href="../../index.html">Creating a Plugin</a> &raquo;</li>
          <li><a href="../index.html">The Data API</a> &raquo;</li>
          <li><a href="index.html">Custom Data</a> &raquo;</li>
    <li>Serializing Custom Data</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../../_sources/plugin/data/custom/serialization.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
  <div class="section" id="serializing-custom-data">
<h1>Serializing Custom Data<a class="headerlink" href="#serializing-custom-data" title="Permalink to this headline">¶</a></h1>
<p>Without a method for serializing and deserializing, your data will not persist across restarts. Sponge has a few different
ways to serialize/deserialize data based on the type of data:</p>
<ul class="simple">
<li><a class="reference external" href="https://jd.spongepowered.org/7.2.0/org/spongepowered/api/data/DataSerializable.html">DataSerializable</a>s implement an interface to perform serialization, and use <a class="reference external" href="https://jd.spongepowered.org/7.2.0/org/spongepowered/api/data/persistence/DataBuilder.html">DataBuilder</a> for
deserialization and creation</li>
<li><a class="reference internal" href="../datamanipulators.html"><span class="doc">DataManipulators</span></a> also implement <code class="docutils literal notranslate"><span class="pre">DataSerializable</span></code>, but instead use a
<a class="reference external" href="https://jd.spongepowered.org/7.2.0/org/spongepowered/api/data/manipulator/DataManipulatorBuilder.html">DataManipulatorBuilder</a> for deserialization and creation</li>
<li>Objects that do not or cannot implement <code class="docutils literal notranslate"><span class="pre">DataSerializable</span></code> use <a class="reference external" href="https://jd.spongepowered.org/7.2.0/org/spongepowered/api/data/persistence/DataTranslator.html">DataTranslator</a> for both serialization
and deserialization</li>
</ul>
<p>This means that practically any object in Java can be saved to disk if it has been registered!</p>
<div class="section" id="reading-dataviews">
<h2>Reading DataViews<a class="headerlink" href="#reading-dataviews" title="Permalink to this headline">¶</a></h2>
<p>Whenever you’re reading a serialized object, it’s tempting to read all the individual values yourself in order to
manually create all the required objects (and their parameters) for your data. However, depending on the data saved in
the container there are a few ways that are far more convenient:</p>
<ul class="simple">
<li>Common java types such as <code class="docutils literal notranslate"><span class="pre">int</span></code>, <code class="docutils literal notranslate"><span class="pre">String</span></code>, <code class="docutils literal notranslate"><span class="pre">double</span></code>, <code class="docutils literal notranslate"><span class="pre">List</span></code> and <code class="docutils literal notranslate"><span class="pre">Map</span></code> can be retrieved using built-in
methods <code class="docutils literal notranslate"><span class="pre">getInt(DataQuery)</span></code>, <code class="docutils literal notranslate"><span class="pre">getString(DataQuery)</span></code>, etc. Lists of these types can also be retrieved in a
similar fashion, for example <code class="docutils literal notranslate"><span class="pre">getStringList(DataQuery)</span></code>.</li>
<li><code class="docutils literal notranslate"><span class="pre">DataSerializable</span></code> objects can be retrieved using <code class="docutils literal notranslate"><span class="pre">getSerializable(DataQuery,</span> <span class="pre">Class)</span></code> or
<code class="docutils literal notranslate"><span class="pre">getSerializableList(DataQuery,</span> <span class="pre">Class)</span></code>. Along with the path, you must also specify the <code class="docutils literal notranslate"><span class="pre">Class</span></code> of the
serializable type, such as <code class="docutils literal notranslate"><span class="pre">Home.class</span></code>.</li>
<li>Objects with a registered <code class="docutils literal notranslate"><span class="pre">DataTranslator</span></code> can be retrieved using <code class="docutils literal notranslate"><span class="pre">getObject(DataQuery,</span> <span class="pre">Class)</span></code> or
<code class="docutils literal notranslate"><span class="pre">getObjectList(DataQuery,</span> <span class="pre">Class)</span></code>. A full list of classes that are supported by default can be found in
<a class="reference external" href="https://jd.spongepowered.org/7.2.0/org/spongepowered/api/data/persistence/DataTranslators.html">DataTranslators</a>.</li>
</ul>
<p>In all cases you need to specify a path using a <a class="reference external" href="https://jd.spongepowered.org/7.2.0/org/spongepowered/api/data/DataQuery.html">DataQuery</a>. If your data has a corresponding <code class="docutils literal notranslate"><span class="pre">Key</span></code> this is
as easy as calling <code class="docutils literal notranslate"><span class="pre">key.getQuery()</span></code>.  Otherwise, the easiest way to do this is with <code class="docutils literal notranslate"><span class="pre">DataQuery.of(&quot;name&quot;)</span></code>.</p>
<div class="admonition tip">
<p class="first admonition-title">Tip</p>
<p class="last">DataQueries can be used to reference data multiple nodes down a tree by using, for example,
<code class="docutils literal notranslate"><span class="pre">DataQuery.of(&quot;my&quot;,</span> <span class="pre">&quot;custom&quot;,</span> <span class="pre">&quot;data&quot;)</span></code>.</p>
</div>
</div>
<div class="section" id="databuilders">
<span id="custom-data-builders"></span><h2>DataBuilders<a class="headerlink" href="#databuilders" title="Permalink to this headline">¶</a></h2>
<p>To make an object serializable, first ensure that it implements <a class="reference external" href="https://jd.spongepowered.org/7.2.0/org/spongepowered/api/data/DataSerializable.html">DataSerializable</a>. You must implement just
two methods:</p>
<ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">getContentVersion()</span></code> - this defined the current version of your data.</li>
<li><code class="docutils literal notranslate"><span class="pre">toContainer()</span></code> - this is what your builder will be given when attempting to deserialize and object. You can store
whatever you want in the returned <code class="docutils literal notranslate"><span class="pre">DataContainer</span></code>, so long as it is also serializable using one of the methods
above. Just use the <code class="docutils literal notranslate"><span class="pre">set(DataQuery,</span> <span class="pre">Object)</span></code> method to save your data to the given path.</li>
</ul>
<div class="admonition tip">
<p class="first admonition-title">Tip</p>
<p class="last">It is recommended that you save the version of your data to the container as well using <code class="docutils literal notranslate"><span class="pre">Queries.CONTENT_VERSION</span></code>
as the query. This will allow for versioning upgrades with <a class="reference internal" href="#content-updaters"><span class="std std-ref">DataContentUpdaters</span></a>.</p>
</div>
<p><strong>Code Example: Implementing toContainer</strong></p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">org.spongepowered.api.data.DataContainer</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">org.spongepowered.api.data.DataQuery</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">org.spongepowered.api.data.Queries</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">org.spongepowered.api.data.MemoryDataContainer</span><span class="p">;</span>

<span class="kd">private</span> <span class="n">String</span> <span class="n">name</span> <span class="o">=</span> <span class="s">&quot;Spongie&quot;</span><span class="p">;</span>

<span class="nd">@Override</span>
<span class="kd">public</span> <span class="n">DataContainer</span> <span class="nf">toContainer</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="n">DataContainer</span><span class="p">.</span><span class="na">createNew</span><span class="p">()</span>
            <span class="p">.</span><span class="na">set</span><span class="p">(</span><span class="n">DataQuery</span><span class="p">.</span><span class="na">of</span><span class="p">(</span><span class="s">&quot;Name&quot;</span><span class="p">),</span> <span class="k">this</span><span class="p">.</span><span class="na">name</span><span class="p">)</span>
            <span class="p">.</span><span class="na">set</span><span class="p">(</span><span class="n">Queries</span><span class="p">.</span><span class="na">CONTENT_VERSION</span><span class="p">,</span> <span class="n">getContentVersion</span><span class="p">());</span>
<span class="p">}</span>
</pre></div>
</div>
<p>The next part is to implement a <a class="reference external" href="https://jd.spongepowered.org/7.2.0/org/spongepowered/api/data/persistence/DataBuilder.html">DataBuilder</a>. It’s recommended to extend <a class="reference external" href="https://jd.spongepowered.org/7.2.0/org/spongepowered/api/data/persistence/AbstractDataBuilder.html">AbstractDataBuilder</a> as
it will try to upgrade your data if the version is less than the current version. There’s only one method you need to
implement - <code class="docutils literal notranslate"><span class="pre">build(DataView)</span></code>, or <code class="docutils literal notranslate"><span class="pre">buildContent(DataView)</span></code> if you’re using <code class="docutils literal notranslate"><span class="pre">AbstractDataBuilder</span></code>.</p>
<p>You’ll want to check that all the queries you want to retrieve are present using <code class="docutils literal notranslate"><span class="pre">DataView.contains(Key...)</span></code>. If not,
the data is likely incomplete and you should return <code class="docutils literal notranslate"><span class="pre">Optional.empty()</span></code>.</p>
<p>If everything seems to be there, use the <code class="docutils literal notranslate"><span class="pre">getX</span></code> methods to construct the values and return a newly created object as
an <code class="docutils literal notranslate"><span class="pre">Optional</span></code>.</p>
</div>
<div class="section" id="datacontentupdaters">
<span id="content-updaters"></span><h2>DataContentUpdaters<a class="headerlink" href="#datacontentupdaters" title="Permalink to this headline">¶</a></h2>
<p>What happens if you change the layout of data in a new version release? <a class="reference external" href="https://jd.spongepowered.org/7.2.0/org/spongepowered/api/data/persistence/DataContentUpdater.html">DataContentUpdater</a>s solve that
problem. If the serialized object is less than the current version, an <code class="docutils literal notranslate"><span class="pre">AbstractDataBuilder</span></code> will try and update the
data before passing it to the builder.</p>
<p>Each updater has an input version and an output version. You should take in the old data and change whatever is needed
to upgrade it to a newer layout. If it’s impossible to convert due to missing data, it may be possible instead to
provide a default value which is interpreted elsewhere - such as by the main builder or the object itself.</p>
<p>Finally, you must ensure that all <code class="docutils literal notranslate"><span class="pre">DataContentUpdater</span></code>s are registerered with
<code class="docutils literal notranslate"><span class="pre">DataManager#registerContentUpdater()</span></code> referencing the main data class - this will allow them to be discovered by
the builder.</p>
<p><strong>Code Example: Implenting a DataContentUpdater</strong></p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">org.spongepowered.api.data.persistence.DataContentUpdater</span>
<span class="kn">import</span> <span class="nn">org.spongepowered.api.text.Text</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">NameUpdater</span> <span class="kd">implements</span> <span class="n">DataContentUpdater</span> <span class="p">{</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">int</span> <span class="nf">getInputVersion</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">return</span> <span class="mi">1</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">int</span> <span class="nf">getOutputVersion</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">return</span> <span class="mi">2</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="n">DataView</span> <span class="nf">update</span><span class="p">(</span><span class="n">DataView</span> <span class="n">content</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">String</span> <span class="n">name</span> <span class="o">=</span> <span class="n">content</span><span class="p">.</span><span class="na">getString</span><span class="p">(</span><span class="n">DataQuery</span><span class="p">.</span><span class="na">of</span><span class="p">(</span><span class="s">&quot;Name&quot;</span><span class="p">)).</span><span class="na">get</span><span class="p">();</span>

        <span class="c1">// For example, version 2 uses a text for the name</span>
        <span class="k">return</span> <span class="n">content</span><span class="p">.</span><span class="na">set</span><span class="p">(</span><span class="n">DataQuery</span><span class="p">.</span><span class="na">of</span><span class="p">(</span><span class="s">&quot;Name&quot;</span><span class="p">),</span> <span class="n">Text</span><span class="p">.</span><span class="na">of</span><span class="p">(</span><span class="n">name</span><span class="p">));</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="datamanipulatorbuilders">
<h2>DataManipulatorBuilders<a class="headerlink" href="#datamanipulatorbuilders" title="Permalink to this headline">¶</a></h2>
<p>A <code class="docutils literal notranslate"><span class="pre">DataManipualatorBuilder</span></code> is very similar to <code class="docutils literal notranslate"><span class="pre">DataBuilder</span></code>, however it adds a few methods directly related to
deserializing manipulators:</p>
<ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">create()</span></code> should return a new manipulator with default values</li>
<li><code class="docutils literal notranslate"><span class="pre">createFrom(DataHolder)</span></code> is similar to the build method, but instead the values should be taken from the
<a class="reference external" href="https://jd.spongepowered.org/7.2.0/org/spongepowered/api/data/DataHolder.html">DataHolder</a>. If there is no data to be taken from the holder, just return the output of <code class="docutils literal notranslate"><span class="pre">create()</span></code>. If
the data is incompatible with the <code class="docutils literal notranslate"><span class="pre">DataHolder</span></code>, you should instead return <code class="docutils literal notranslate"><span class="pre">Optional.empty()</span></code>.</li>
</ul>
<p>Just like <code class="docutils literal notranslate"><span class="pre">DataBuilder</span></code>, you should read and return your manipulator in the relevant <code class="docutils literal notranslate"><span class="pre">build</span></code> method.</p>
<p><code class="docutils literal notranslate"><span class="pre">DataManipulatorBuilder</span></code>s can make use of <a class="reference internal" href="#content-updaters"><span class="std std-ref">DataContentUpdaters</span></a> as well, as long as you implement
<code class="docutils literal notranslate"><span class="pre">AbstractDataBuilder</span></code>.</p>
<p>Registering a <code class="docutils literal notranslate"><span class="pre">DataManipulatorBuilder</span></code> is also similar to <code class="docutils literal notranslate"><span class="pre">DataBuilder</span></code> but uses the <code class="docutils literal notranslate"><span class="pre">register()</span></code> method. You
must reference both your mutable and immutable classes in the method, in addition to an instance of your builder.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">You <strong>must</strong> reference the implementation classes if you have split the API from the implementaton.</p>
</div>
</div>
<div class="section" id="datatranslators">
<h2>DataTranslators<a class="headerlink" href="#datatranslators" title="Permalink to this headline">¶</a></h2>
<p>Often the objects you want to serialize are not objects that implement <code class="docutils literal notranslate"><span class="pre">DataSerializable</span></code>, such as <code class="docutils literal notranslate"><span class="pre">Vector3d</span></code> or
<code class="docutils literal notranslate"><span class="pre">Date</span></code>. To allow these objects you implelement a <a class="reference external" href="https://jd.spongepowered.org/7.2.0/org/spongepowered/api/data/persistence/DataTranslator.html">DataTranslator</a> which handles <em>both</em> the serialization
and deserialization of the object.</p>
<p>The implementation of <code class="docutils literal notranslate"><span class="pre">translate</span></code> is identical to <code class="docutils literal notranslate"><span class="pre">toContainer()</span></code> and <code class="docutils literal notranslate"><span class="pre">build(DataView)</span></code> for a
<code class="docutils literal notranslate"><span class="pre">DataSerializable</span></code> as shown above, except that an <code class="docutils literal notranslate"><span class="pre">InvalidDataException</span></code> is thrown if data is missing in place of
returning an <code class="docutils literal notranslate"><span class="pre">Optional</span></code>.</p>
<p>As with other data, ensure that you register the translator during <code class="docutils literal notranslate"><span class="pre">GameRegistryEvent.Register&lt;DataTranslator&lt;?&gt;&gt;</span></code>.</p>
</div>
</div>

           </div>
          </div>
<footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="../catalog-types.html" class="btn btn-neutral float-right" title="Catalog Types" accesskey="n" rel="next">Next <span class="fa fa-angle-right"></span></a>
        <a href="dataholders.html" class="btn btn-neutral" title="Custom DataHolders" accesskey="p" rel="prev"><span class="fa fa-angle-left"></span> Previous</a>
    </div>

    <hr/>

    <section id="license-footer">
        <p>Except where otherwise noted,
            <a xmlns:dct="http://purl.org/dc/terms/" xmlns:cc="http://creativecommons.org/ns#" property="dct:title" rel="cc:attributionURL" href="https://github.com/SpongePowered/SpongeDocs">SpongeDocs</a>
            is licensed under a <a rel="license" href="https://creativecommons.org/licenses/by-sa/4.0/">Creative Commons Attribution-ShareAlike 4.0 International License</a>.
        </p>
        <a id="license-icons" rel="license" href="https://creativecommons.org/licenses/by-sa/4.0/" title="CC-BY-SA" aria-hidden="true">cba</a>
    </section>
</footer>        </div>
      </div>

    </section>

  </div>


<div class="rst-versions" data-toggle="rst-versions" role="note" aria-label="versions">
    <span class="rst-current-version" data-toggle="rst-current-version">
        <i class="fa fa-book"> <span>SpongeDocs</span></i>
        v: 7.2.0
        <span class="fa fa-caret-down"></span>
    </span>
    <div id="versions" class="rst-other-versions">




    </div>
</div>

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../../../',
            VERSION:'7.2.0',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>      <script type="text/javascript" src="../../../_static/jquery.js"></script>      <script type="text/javascript" src="../../../_static/underscore.js"></script>      <script type="text/javascript" src="../../../_static/doctools.js"></script>      <script type="text/javascript" src="../../../_static/language_data.js"></script>      <script type="text/javascript" src="../../../_static/spongedocs.js"></script>

    <script type="text/javascript" src="../../../_static/js/theme.js"></script>

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
 
</body>
</html>
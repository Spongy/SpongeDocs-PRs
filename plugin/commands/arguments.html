
<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Argument Parsing &mdash; Sponge 7.2.0 documentation</title>

  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />  <link rel="stylesheet" href="../../_static/spongedocs.css" type="text/css" />
    <link rel="shortcut icon" href="../../_static/favicon.ico"/>

  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->      <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>        <script src="../../_static/jquery.js"></script>        <script src="../../_static/underscore.js"></script>        <script src="../../_static/doctools.js"></script>        <script src="../../_static/language_data.js"></script>        <script src="../../_static/spongedocs.js"></script>    <script type="text/javascript" src="../../_static/js/theme.js"></script>

    <link rel="index" title="Index" href="../../genindex.html" />    <link rel="search" title="Search" href="../../search.html" />    <link rel="next" title="Command Flags" href="flags.html" />    <link rel="prev" title="Building a Command" href="creating.html" /></head>

<body class="wy-body-for-nav">

   <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
    <div id="sp-logo-container" class="page-scroll">
        <a class="logo" href="../../index.html">
            <img src="../../_static/spongie-mark-dark.svg">
            <span>Sponge</span>
            <i class="fa fa-fw fa-chevron-down"></i>
        </a>
        <div id="sp-logo-menu">
            <ul id="sp-logo-dropdown">
                <li><a href="https://www.spongepowered.org"><i class="fa-fw fa fa-home"></i>Homepage</a></li>
                <li><a href="https://forums.spongepowered.org"><i class="fa-fw fa fa-comments"></i>Forums</a></li>
                <li><a href="https://github.com/SpongePowered"><i class="fa-fw fa fa-code"></i>Code</a></li>
                <li class="active"><a href="https://docs.spongepowered.org"><i class="fa-fw fa fa-book"></i>Docs</a></li>
                <li><a href="https://jd.spongepowered.org"><i class="fa-fw fa fa-graduation-cap"></i>Javadocs</a></li>
                <li><a href="https://forums.spongepowered.org/c/plugins/plugin-releases"><i class="fa-fw fa fa-plug"></i>Plugins</a></li>
                <li><a href="https://ore.spongepowered.org"><img src="../../_static/ore.svg" alt="" class="fa-fw fa ore-logo">Ore <sup>Beta</sup></a></li>
                <li><a href="https://www.spongepowered.org/downloads"><i class="fa-fw fa fa-download"></i>Downloads</a></li>
                <li><a href="https://www.spongepowered.org/chat"><i class="fa-fw fa fa-comment"></i>Chat</a></li>
            </ul>
        </div>
    </div>

<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../../server/index.html">Creating a Server</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../versions/index.html">Versioning Policy</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../preparing/index.html">Preparing for Development</a></li>
</ul>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">Creating a Plugin</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../api-versions.html">API-Versions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../buildsystem.html">Build Systems</a></li>
<li class="toctree-l2"><a class="reference internal" href="../workspace/index.html">Setting Up Your Workspace</a></li>
<li class="toctree-l2"><a class="reference internal" href="../project/index.html">Setting Up Your Project</a></li>
<li class="toctree-l2"><a class="reference internal" href="../plugin-identifier.html">Plugin Identifiers</a></li>
<li class="toctree-l2"><a class="reference internal" href="../plugin-class.html">Main Plugin Class</a></li>
<li class="toctree-l2"><a class="reference internal" href="../lifecycle.html">Plugin Lifecycle</a></li>
<li class="toctree-l2"><a class="reference internal" href="../injection.html">Dependency Injection</a></li>
<li class="toctree-l2"><a class="reference internal" href="../practices/index.html">Practices</a></li>
<li class="toctree-l2"><a class="reference internal" href="../optional/index.html">Optionals</a></li>
<li class="toctree-l2"><a class="reference internal" href="../logging.html">Logging and Debugging</a></li>
<li class="toctree-l2"><a class="reference internal" href="../text/index.html">Text</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="index.html">Plugin Commands</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="creating.html">Building a Command</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">Argument Parsing</a></li>
<li class="toctree-l3"><a class="reference internal" href="flags.html">Command Flags</a></li>
<li class="toctree-l3"><a class="reference internal" href="childcommands.html">Child Commands</a></li>
<li class="toctree-l3"><a class="reference internal" href="service.html">The Command Manager</a></li>
<li class="toctree-l3"><a class="reference internal" href="commandcallable.html">Low-Level Command API</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../event/index.html">Events</a></li>
<li class="toctree-l2"><a class="reference internal" href="../configuration/index.html">Configuring Plugins</a></li>
<li class="toctree-l2"><a class="reference internal" href="../assets.html">The Asset API</a></li>
<li class="toctree-l2"><a class="reference internal" href="../data/index.html">The Data API</a></li>
<li class="toctree-l2"><a class="reference internal" href="../blocks/index.html">Blocks</a></li>
<li class="toctree-l2"><a class="reference internal" href="../entities/index.html">Entities</a></li>
<li class="toctree-l2"><a class="reference internal" href="../items/index.html">Items</a></li>
<li class="toctree-l2"><a class="reference internal" href="../trade-offers.html">Trade-Offers</a></li>
<li class="toctree-l2"><a class="reference internal" href="../effects.html">Effects</a></li>
<li class="toctree-l2"><a class="reference internal" href="../scheduler.html">Scheduler</a></li>
<li class="toctree-l2"><a class="reference internal" href="../services.html">Services</a></li>
<li class="toctree-l2"><a class="reference internal" href="../database.html">Databases</a></li>
<li class="toctree-l2"><a class="reference internal" href="../permissions.html">Permissions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../bans.html">Bans</a></li>
<li class="toctree-l2"><a class="reference internal" href="../metrics.html">Metrics Collection</a></li>
<li class="toctree-l2"><a class="reference internal" href="../bookview.html">Book Views</a></li>
<li class="toctree-l2"><a class="reference internal" href="../economy/index.html">Economy</a></li>
<li class="toctree-l2"><a class="reference internal" href="../placeholders/index.html">Placeholders</a></li>
<li class="toctree-l2"><a class="reference internal" href="../wgen/index.html">World Generation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../manager.html">Plugin Manager</a></li>
<li class="toctree-l2"><a class="reference internal" href="../game-profile-manager.html">Game Profile Manager</a></li>
<li class="toctree-l2"><a class="reference internal" href="../offline-userplayer-data.html">Offline Player Data</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tab-lists.html">Tab Lists</a></li>
<li class="toctree-l2"><a class="reference internal" href="../plugin-meta.html">Plugin Metadata</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ray-tracing.html">Ray Tracing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../debugging.html">Plugin Debugging</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tutorials.html">Tutorials</a></li>
<li class="toctree-l2"><a class="reference internal" href="../internals/index.html">Implementation-dependent Plugins</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../ore/index.html">Ore Documentation</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../contributing/index.html">Contributing to Sponge</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../about/index.html">About the Sponge Project</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      <nav class="wy-nav-top" aria-label="top navigation">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">Sponge</a>
      </nav>


      <div class="wy-nav-content">        <div class="rst-content">






<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home"></a> &raquo;</li>
          <li><a href="../index.html">Creating a Plugin</a> &raquo;</li>
          <li><a href="index.html">Plugin Commands</a> &raquo;</li>
      <li>Argument Parsing</li>
      <li class="wy-breadcrumbs-aside">
              <a href="https://github.com/SpongePowered/SpongeDocs/blob/PGP-go-bye-bye/source/plugin/commands/arguments.rst" class="fa fa-github"> Edit on GitHub</a>
      </li>
  </ul>

  <hr/>
</div>          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">           <div itemprop="articleBody">
  <div class="section" id="argument-parsing">
<h1>Argument Parsing<a class="headerlink" href="#argument-parsing" title="Permalink to this headline">¶</a></h1>
<p>The Command Builder API comes with a powerful argument parser. It converts the string input to java base types
(integers, booleans, strings) or game objects (players, worlds, block types, …). The parser supports optional
arguments and flags. It also handles TAB completion of arguments.</p>
<p>The parsed arguments are stored in the <a class="reference external" href="https://jd.spongepowered.org/7.2.0/org/spongepowered/api/command/args/CommandContext.html">CommandContext</a> object. If the parser returns a single object, obtain
it with <a class="reference external" href="https://jd.spongepowered.org/7.2.0/org/spongepowered/api/command/args/CommandContext.html#getOne-java.lang.String-">CommandContext#getOne(String)</a>. Optional and weak arguments may return <code class="docutils literal notranslate"><span class="pre">Optional.empty()</span></code>.</p>
<p>Many of the parsers may return more than one object (e.g. multiple players with a matching username). In that case, you
must use the <a class="reference external" href="https://jd.spongepowered.org/7.2.0/org/spongepowered/api/command/args/CommandContext.html#getAll-java.lang.String-">CommandContext#getAll(String)</a> method to get the <code class="docutils literal notranslate"><span class="pre">Collection</span></code> of possible matches.
<strong>Otherwise, the context object will throw an exception!</strong></p>
<p>When creating a command, consider whether the argument could return multiple values, for example, whether a player
argument could support multiple players when using a selector. If you support multiple values the users need to type
only one command and can use an easier command syntax. Example: <code class="docutils literal notranslate"><span class="pre">/tell</span> <span class="pre">&#64;a</span> <span class="pre">Who</span> <span class="pre">took</span> <span class="pre">the</span> <span class="pre">cookies?</span></code></p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>You can use the <a class="reference external" href="https://jd.spongepowered.org/7.2.0/org/spongepowered/api/command/args/GenericArguments.html#onlyOne-org.spongepowered.api.command.args.CommandElement-">GenericArguments#onlyOne(CommandElement)</a> element to restrict the amount of returned values
to a single one, so you can safely use <code class="docutils literal notranslate"><span class="pre">args.&lt;T&gt;getOne(String)</span></code>. However the user will still get a message, if they
try to select more than one value.</p>
</div>
<p>To create a new <a class="reference external" href="https://jd.spongepowered.org/7.2.0/org/spongepowered/api/command/args/CommandElement.html">CommandElement</a> (argument), use the <a class="reference external" href="https://jd.spongepowered.org/7.2.0/org/spongepowered/api/command/args/GenericArguments.html">GenericArguments</a> factory class. Many command
elements require a short text key, which is displayed in error and help messages.</p>
<p>Apply the <code class="docutils literal notranslate"><span class="pre">CommandElement</span></code> to the command builder with the <a class="reference external" href="https://jd.spongepowered.org/7.2.0/org/spongepowered/api/command/spec/CommandSpec.Builder.html#arguments-org.spongepowered.api.command.args.CommandElement...-">CommandSpec.Builder#arguments(CommandElement…)</a>
method. It is possible to pass more than one <code class="docutils literal notranslate"><span class="pre">CommandElement</span></code> to the method, thus chaining multiple arguments (e.g.
<code class="docutils literal notranslate"><span class="pre">/msg</span> <span class="pre">&lt;player&gt;</span> <span class="pre">&lt;msg&gt;</span></code>). This has the same effect as wrapping the <code class="docutils literal notranslate"><span class="pre">CommandElement</span></code> objects in a
<a class="reference external" href="https://jd.spongepowered.org/7.2.0/org/spongepowered/api/command/args/GenericArguments.html#seq-org.spongepowered.api.command.args.CommandElement...-">GenericArguments#seq(CommandElement…)</a> element.</p>
<div class="section" id="example-building-a-command-with-multiple-arguments">
<h2>Example: Building a Command with Multiple Arguments<a class="headerlink" href="#example-building-a-command-with-multiple-arguments" title="Permalink to this headline">¶</a></h2>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">org.spongepowered.api.Sponge</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">org.spongepowered.api.text.Text</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">org.spongepowered.api.entity.living.player.Player</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">org.spongepowered.api.command.CommandException</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">org.spongepowered.api.command.CommandResult</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">org.spongepowered.api.command.CommandSource</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">org.spongepowered.api.command.args.CommandContext</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">org.spongepowered.api.command.args.GenericArguments</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">org.spongepowered.api.command.spec.CommandExecutor</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">org.spongepowered.api.command.spec.CommandSpec</span><span class="p">;</span>

<span class="n">PluginContainer</span> <span class="n">plugin</span> <span class="o">=</span> <span class="p">...;</span>

<span class="n">CommandSpec</span> <span class="n">myCommandSpec</span> <span class="o">=</span> <span class="n">CommandSpec</span><span class="p">.</span><span class="na">builder</span><span class="p">()</span>
        <span class="p">.</span><span class="na">description</span><span class="p">(</span><span class="n">Text</span><span class="p">.</span><span class="na">of</span><span class="p">(</span><span class="s">&quot;Send a message to a player&quot;</span><span class="p">))</span>
        <span class="p">.</span><span class="na">permission</span><span class="p">(</span><span class="s">&quot;myplugin.command.message&quot;</span><span class="p">)</span>

        <span class="p">.</span><span class="na">arguments</span><span class="p">(</span>
                <span class="n">GenericArguments</span><span class="p">.</span><span class="na">onlyOne</span><span class="p">(</span><span class="n">GenericArguments</span><span class="p">.</span><span class="na">player</span><span class="p">(</span><span class="n">Text</span><span class="p">.</span><span class="na">of</span><span class="p">(</span><span class="s">&quot;player&quot;</span><span class="p">))),</span>
                <span class="n">GenericArguments</span><span class="p">.</span><span class="na">remainingJoinedStrings</span><span class="p">(</span><span class="n">Text</span><span class="p">.</span><span class="na">of</span><span class="p">(</span><span class="s">&quot;message&quot;</span><span class="p">)))</span>

        <span class="p">.</span><span class="na">executor</span><span class="p">((</span><span class="n">CommandSource</span> <span class="n">src</span><span class="p">,</span> <span class="n">CommandContext</span> <span class="n">args</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="p">{</span>

            <span class="n">Player</span> <span class="n">player</span> <span class="o">=</span> <span class="n">args</span><span class="p">.</span><span class="o">&lt;</span><span class="n">Player</span><span class="o">&gt;</span><span class="n">getOne</span><span class="p">(</span><span class="s">&quot;player&quot;</span><span class="p">).</span><span class="na">get</span><span class="p">();</span>
            <span class="n">String</span> <span class="n">message</span> <span class="o">=</span> <span class="n">args</span><span class="p">.</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span><span class="n">getOne</span><span class="p">(</span><span class="s">&quot;message&quot;</span><span class="p">).</span><span class="na">get</span><span class="p">();</span>

            <span class="n">player</span><span class="p">.</span><span class="na">sendMessage</span><span class="p">(</span><span class="n">Text</span><span class="p">.</span><span class="na">of</span><span class="p">(</span><span class="n">message</span><span class="p">));</span>

            <span class="k">return</span> <span class="n">CommandResult</span><span class="p">.</span><span class="na">success</span><span class="p">();</span>
        <span class="p">})</span>
        <span class="p">.</span><span class="na">build</span><span class="p">();</span>

<span class="n">Sponge</span><span class="p">.</span><span class="na">getCommandManager</span><span class="p">().</span><span class="na">register</span><span class="p">(</span><span class="n">plugin</span><span class="p">,</span> <span class="n">myCommandSpec</span><span class="p">,</span> <span class="s">&quot;message&quot;</span><span class="p">,</span> <span class="s">&quot;msg&quot;</span><span class="p">,</span> <span class="s">&quot;m&quot;</span><span class="p">);</span>
</pre></div>
</div>
</div>
<div class="section" id="overview-of-the-genericarguments-command-elements">
<h2>Overview of the <code class="docutils literal notranslate"><span class="pre">GenericArguments</span></code> command elements<a class="headerlink" href="#overview-of-the-genericarguments-command-elements" title="Permalink to this headline">¶</a></h2>
<table class="docutils align-default">
<colgroup>
<col style="width: 19%" />
<col style="width: 60%" />
<col style="width: 21%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Command Element</p></th>
<th class="head"><p>Description</p></th>
<th class="head"><p>Value Type &amp; Amount</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">none</span></code></p></td>
<td><p>Expects no arguments. This is the default behavior of a <code class="docutils literal notranslate"><span class="pre">CommandSpec</span></code>.</p></td>
<td></td>
</tr>
<tr class="row-odd"><td colspan="3"><p><strong>Java Base Types</strong></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">string</span></code></p></td>
<td><p>Require an argument to be a string.</p></td>
<td><p>one <code class="docutils literal notranslate"><span class="pre">String</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">remainingJoinedStrings</span></code></p></td>
<td><p>Concatenates all remaining arguments separated by spaces (useful for message commands).</p></td>
<td><p>one <code class="docutils literal notranslate"><span class="pre">String</span></code></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">bool</span></code></p></td>
<td><p>Require an argument to be a boolean.</p></td>
<td><p>one <code class="docutils literal notranslate"><span class="pre">Boolean</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">integer</span></code></p></td>
<td><p>Require an argument to be an integer.</p></td>
<td><p>one <code class="docutils literal notranslate"><span class="pre">Integer</span></code></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">doubleNum</span></code></p></td>
<td><p>Require an argument to be a double.</p></td>
<td><p>one <code class="docutils literal notranslate"><span class="pre">Double</span></code></p></td>
</tr>
<tr class="row-odd"><td colspan="3"><p><strong>Game Objects</strong></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">player</span></code></p></td>
<td><p>Expect an argument to represent an online player. <strong>May return multiple players!</strong></p></td>
<td><p>multiple <code class="docutils literal notranslate"><span class="pre">Player</span></code> instances</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">playerOrSource</span></code></p></td>
<td><p>Like <code class="docutils literal notranslate"><span class="pre">player</span></code>, but returns the sender of the command if no matching player was found.</p></td>
<td><p>multiple <code class="docutils literal notranslate"><span class="pre">Player</span></code> instances</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">userOrSource</span></code></p></td>
<td><p>Like <code class="docutils literal notranslate"><span class="pre">playerOrSource</span></code>, but returns a user instead of a player.</p></td>
<td><p>multiple <code class="docutils literal notranslate"><span class="pre">User</span></code> instances</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">world</span></code></p></td>
<td><p>Expect an argument to represent a world (also includes unloaded worlds).</p></td>
<td><p>multiple <code class="docutils literal notranslate"><span class="pre">WorldProperties</span></code></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">dimension</span></code></p></td>
<td><p>Expect an argument to represent a dimension (<code class="docutils literal notranslate"><span class="pre">END</span></code>, <code class="docutils literal notranslate"><span class="pre">NETHER</span></code>, <code class="docutils literal notranslate"><span class="pre">OVERWORLD</span></code>).</p></td>
<td><p>multiple <code class="docutils literal notranslate"><span class="pre">DimensionType</span></code>
instances</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">location</span></code></p></td>
<td><p>Expect an argument to represent a <code class="docutils literal notranslate"><span class="pre">Location</span></code>.</p></td>
<td><p>one <code class="docutils literal notranslate"><span class="pre">Location</span></code></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">vector3d</span></code></p></td>
<td><p>Expect an argument to represent a <code class="docutils literal notranslate"><span class="pre">Vector3d</span></code>.</p></td>
<td><p>one <code class="docutils literal notranslate"><span class="pre">Vector3d</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">catalogedElement</span></code></p></td>
<td><p>Expect an argument that is a member of the specified
<a class="reference external" href="https://jd.spongepowered.org/7.2.0/org/spongepowered/api/CatalogType.html">CatalogType</a>.</p></td>
<td><p>multiple matching elements
of the specified catalog type</p></td>
</tr>
<tr class="row-even"><td colspan="3"><p><strong>Matchers</strong></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">choices</span></code></p></td>
<td><p>Return an argument that allows selecting from a limited set of values.</p></td>
<td><p>one specified value</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">literal</span></code></p></td>
<td><p>Expect a literal sequence of arguments (e.g. <code class="docutils literal notranslate"><span class="pre">&quot;i&quot;,</span> <span class="pre">&quot;luv&quot;,</span> <span class="pre">&quot;u&quot;</span></code>: <code class="docutils literal notranslate"><span class="pre">/cmd</span> <span class="pre">i</span> <span class="pre">luv</span> <span class="pre">u</span></code>).
Throws an error if the arguments do not match.</p></td>
<td><p>one specified value</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">enumValue</span></code></p></td>
<td><p>Require the argument to be a key under the provided enum.</p></td>
<td><p>multiple matching elements
of the specified enum</p></td>
</tr>
<tr class="row-even"><td colspan="3"><p><strong>Utilities</strong></p>
<p>Can be wrapped around command elements. The value type is inherited from the wrapped element.</p>
</td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">seq</span></code></p></td>
<td><p>Builds a sequence of command elements (e.g. <code class="docutils literal notranslate"><span class="pre">/cmd</span> <span class="pre">&lt;arg1&gt;</span> <span class="pre">&lt;arg2&gt;</span> <span class="pre">&lt;arg3&gt;</span></code>).</p></td>
<td><p>inherited</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">repeated</span></code></p></td>
<td><p>Require a given command element to be provided a certain number of times.</p></td>
<td><p>multiple inherited</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">allOf</span></code></p></td>
<td><p>Require all remaining args to match the provided command element.</p></td>
<td><p>multiple inherited</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">optional</span></code></p></td>
<td><p>Make the provided command element optional. Throws an error if the argument
is of invalid format and there are no more args.</p></td>
<td><p>inherited</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">optionalWeak</span></code></p></td>
<td><p>Make the provided command element optional. Does not throw an error if the argument
is of invalid format and there are no more args.</p></td>
<td><p>inherited</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">firstParsing</span></code></p></td>
<td><p>Returns a command element that matches the first of the provided elements that parses
(useful for command overloading, e.g. <code class="docutils literal notranslate"><span class="pre">/settime</span> <span class="pre">&lt;day|night|&lt;number&gt;</span></code>).</p></td>
<td><p>inherited</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">onlyOne</span></code></p></td>
<td><p>Restricts the given command element to only insert one value into the context at the
provided key.</p></td>
<td><p>inherited</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">flags</span></code></p></td>
<td><p>Returns a builder for command flags (e.g. <code class="docutils literal notranslate"><span class="pre">/cmd</span> <span class="pre">[-a]</span> <span class="pre">[-b</span> <span class="pre">&lt;value&gt;]</span></code>).</p>
<p>See <a class="reference internal" href="flags.html"><span class="doc">Command Flags</span></a></p>
</td>
<td><p>Short Flag: one <code class="docutils literal notranslate"><span class="pre">Boolean</span></code></p>
<p>Long Flag: one <code class="docutils literal notranslate"><span class="pre">String</span></code></p>
<p>Value Flag: inherited</p>
</td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">requiringPermission</span></code></p></td>
<td><p>Requires the command sender to have the specified permission in order to use the given
command argument</p></td>
<td><p>inherited</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">requiringPermissionWeak</span></code></p></td>
<td><p>Requires the command sender to have the specified permission in order to use the given
command argument. Does not throw an error if the user does not have the permission.</p></td>
<td><p>inherited</p></td>
</tr>
</tbody>
</table>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>See the Javadocs for <a class="reference external" href="https://jd.spongepowered.org/7.2.0/org/spongepowered/api/command/args/GenericArguments.html">GenericArguments</a> for more information.</p>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Don’t expect that a <code class="docutils literal notranslate"><span class="pre">CommandElement</span></code>s will only ever return a single value, a lot of them support multiple return
values; some might even support regular expressions or use a command selector. This is intentional as it makes
commands easier to use. Example: <code class="docutils literal notranslate"><span class="pre">/tell</span> <span class="pre">&#64;a</span> <span class="pre">BanditPlayer</span> <span class="pre">has</span> <span class="pre">the</span> <span class="pre">cookies!</span></code>. If you want to make sure to only get a
single value use <code class="docutils literal notranslate"><span class="pre">GenericArguments#onlyOne(CommandElement)</span></code>.</p>
</div>
</div>
<div class="section" id="custom-command-elements">
<h2>Custom Command Elements<a class="headerlink" href="#custom-command-elements" title="Permalink to this headline">¶</a></h2>
<p>It is possible to create custom command elements (e.g. a URL parser or a <code class="docutils literal notranslate"><span class="pre">Vector2i</span></code> element) by extending the abstract
<code class="docutils literal notranslate"><span class="pre">CommandElement</span></code> class.</p>
<p>The <a class="reference external" href="https://jd.spongepowered.org/7.2.0/org/spongepowered/api/command/args/CommandElement.html#parseValue-org.spongepowered.api.command.CommandSource-org.spongepowered.api.command.args.CommandArgs-">CommandElement#parseValue(CommandSource, CommandArgs)</a> method should fetch a raw argument string with
<a class="reference external" href="https://jd.spongepowered.org/7.2.0/org/spongepowered/api/command/args/CommandArgs.html#next--">CommandArgs#next()</a> and convert it to an object. The method should throw an <a class="reference external" href="https://jd.spongepowered.org/7.2.0/org/spongepowered/api/command/args/ArgumentParseException.html">ArgumentParseException</a>
if the parsing fails.</p>
<p>The <a class="reference external" href="https://jd.spongepowered.org/7.2.0/org/spongepowered/api/command/args/CommandElement.html#complete-org.spongepowered.api.command.CommandSource-org.spongepowered.api.command.args.CommandArgs-org.spongepowered.api.command.args.CommandContext-">CommandElement#complete(CommandSource, CommandArgs, CommandContext)</a> method should use
<a class="reference external" href="https://jd.spongepowered.org/7.2.0/org/spongepowered/api/command/args/CommandArgs.html#peek--">CommandArgs#peek()</a> to read the next raw argument. It returns a list of suggestions for TAB completion.</p>
<div class="section" id="example-vector2i-command-element-definition">
<h3>Example: <code class="docutils literal notranslate"><span class="pre">Vector2i</span></code> command element definition<a class="headerlink" href="#example-vector2i-command-element-definition" title="Permalink to this headline">¶</a></h3>
<p>The parser in this example reads two input arguments and converts them to a vector.</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">com.flowpowered.math.vector.Vector2i</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">org.spongepowered.api.command.args.ArgumentParseException</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">org.spongepowered.api.command.args.CommandArgs</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">org.spongepowered.api.text.Text</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">org.spongepowered.api.command.args.CommandElement</span><span class="p">;</span>

<span class="kn">import</span> <span class="nn">java.util.Collections</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">java.util.List</span><span class="p">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Vector2iCommandElement</span> <span class="kd">extends</span> <span class="n">CommandElement</span> <span class="p">{</span>

    <span class="kd">protected</span> <span class="nf">Vector2iCommandElement</span><span class="p">(</span><span class="n">Text</span> <span class="n">key</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">super</span><span class="p">(</span><span class="n">key</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="nd">@Override</span>
    <span class="kd">protected</span> <span class="n">Object</span> <span class="nf">parseValue</span><span class="p">(</span><span class="n">CommandSource</span> <span class="n">source</span><span class="p">,</span> <span class="n">CommandArgs</span> <span class="n">args</span><span class="p">)</span> <span class="kd">throws</span> <span class="n">ArgumentParseException</span> <span class="p">{</span>

        <span class="n">String</span> <span class="n">xInput</span> <span class="o">=</span> <span class="n">args</span><span class="p">.</span><span class="na">next</span><span class="p">();</span>
        <span class="kt">int</span> <span class="n">x</span> <span class="o">=</span> <span class="n">parseInt</span><span class="p">(</span><span class="n">xInput</span><span class="p">,</span> <span class="n">args</span><span class="p">);</span>

        <span class="n">String</span> <span class="n">yInput</span> <span class="o">=</span> <span class="n">args</span><span class="p">.</span><span class="na">next</span><span class="p">();</span>
        <span class="kt">int</span> <span class="n">y</span> <span class="o">=</span> <span class="n">parseInt</span><span class="p">(</span><span class="n">yInput</span><span class="p">,</span> <span class="n">args</span><span class="p">);</span>

        <span class="k">return</span> <span class="k">new</span> <span class="n">Vector2i</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="kd">private</span> <span class="kt">int</span> <span class="nf">parseInt</span><span class="p">(</span><span class="n">String</span> <span class="n">input</span><span class="p">,</span> <span class="n">CommandArgs</span> <span class="n">args</span><span class="p">)</span> <span class="kd">throws</span> <span class="n">ArgumentParseException</span> <span class="p">{</span>
        <span class="k">try</span> <span class="p">{</span>
            <span class="k">return</span> <span class="n">Integer</span><span class="p">.</span><span class="na">parseInt</span><span class="p">(</span><span class="n">input</span><span class="p">);</span>
        <span class="p">}</span> <span class="k">catch</span><span class="p">(</span><span class="n">NumberFormatException</span> <span class="n">e</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">throw</span> <span class="n">args</span><span class="p">.</span><span class="na">createError</span><span class="p">(</span><span class="n">Text</span><span class="p">.</span><span class="na">of</span><span class="p">(</span><span class="s">&quot;&#39;&quot;</span> <span class="o">+</span> <span class="n">input</span> <span class="o">+</span> <span class="s">&quot;&#39; is not a valid number!&quot;</span><span class="p">));</span>
        <span class="p">}</span>
    <span class="p">}</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="n">List</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="nf">complete</span><span class="p">(</span><span class="n">CommandSource</span> <span class="n">src</span><span class="p">,</span> <span class="n">CommandArgs</span> <span class="n">args</span><span class="p">,</span> <span class="n">CommandContext</span> <span class="n">context</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="n">Collections</span><span class="p">.</span><span class="na">emptyList</span><span class="p">();</span>
    <span class="p">}</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="n">Text</span> <span class="nf">getUsage</span><span class="p">(</span><span class="n">CommandSource</span> <span class="n">src</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="n">Text</span><span class="p">.</span><span class="na">of</span><span class="p">(</span><span class="s">&quot;&lt;x&gt; &lt;y&gt;&quot;</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="example-vector2i-command-element-usage">
<h3>Example: <code class="docutils literal notranslate"><span class="pre">Vector2i</span></code> command element usage<a class="headerlink" href="#example-vector2i-command-element-usage" title="Permalink to this headline">¶</a></h3>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="c1">// /plottp &lt;x&gt; &lt;y&gt;</span>
<span class="n">CommandSpec</span> <span class="n">myCommandSpec</span> <span class="o">=</span> <span class="n">CommandSpec</span><span class="p">.</span><span class="na">builder</span><span class="p">()</span>
        <span class="p">.</span><span class="na">description</span><span class="p">(</span><span class="n">Text</span><span class="p">.</span><span class="na">of</span><span class="p">(</span><span class="s">&quot;Teleport to a plot&quot;</span><span class="p">))</span>
        <span class="p">.</span><span class="na">permission</span><span class="p">(</span><span class="s">&quot;myplugin.command.plot.tp&quot;</span><span class="p">)</span>

        <span class="p">.</span><span class="na">arguments</span><span class="p">(</span><span class="k">new</span> <span class="n">Vector2iCommandElement</span><span class="p">(</span><span class="n">Text</span><span class="p">.</span><span class="na">of</span><span class="p">(</span><span class="s">&quot;coordinates&quot;</span><span class="p">)))</span>

        <span class="p">.</span><span class="na">executor</span><span class="p">(</span><span class="k">new</span> <span class="n">MyCommandExecutor</span><span class="p">())</span>
        <span class="p">.</span><span class="na">build</span><span class="p">();</span>
</pre></div>
</div>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>Look at the <a class="reference external" href="https://github.com/SpongePowered/SpongeAPI/blob/stable-7/src/main/java/org/spongepowered/api/command/args/GenericArguments.java">source code</a>
of the <code class="docutils literal notranslate"><span class="pre">GenericArguments</span></code> class for more examples.</p>
</div>
</div>
<div class="section" id="using-selectors-in-custom-command-elements">
<h3>Using Selectors in Custom Command Elements<a class="headerlink" href="#using-selectors-in-custom-command-elements" title="Permalink to this headline">¶</a></h3>
<p>Sponge provides support for parsing selectors, meaning that you can make use of them in your custom elements. There
are two steps in using selectors, <strong>parsing</strong> (getting a <a class="reference external" href="https://jd.spongepowered.org/7.2.0/org/spongepowered/api/text/selector/Selector.html">Selector</a> from the string) and <strong>resolving</strong>
(getting a set of <a class="reference external" href="https://jd.spongepowered.org/7.2.0/org/spongepowered/api/entity/Entity.html">Entity</a> objects selected by the selector).</p>
<p>To <strong>parse</strong> a selector string, use the <a class="reference external" href="https://jd.spongepowered.org/7.2.0/org/spongepowered/api/text/selector/Selector.html#parse-java.lang.String-">Selector#parse(String)</a> method, passing the entire selector,
including the <code class="docutils literal notranslate"><span class="pre">&#64;</span></code> symbol. This will turn the string into a <code class="docutils literal notranslate"><span class="pre">Selector</span></code> object that can be queried or resolved.
Note that if the string is not a valid selector, an <a class="reference external" href="https://docs.oracle.com/javase/8/docs/api/java/lang/IllegalArgumentException.html">IllegalArgumentException</a> will be thrown.</p>
<p>To <strong>resolve</strong> this selector, use <a class="reference external" href="https://jd.spongepowered.org/7.2.0/org/spongepowered/api/text/selector/Selector.html#resolve-org.spongepowered.api.command.CommandSource-">Selector#resolve(CommandSource)</a>. This will return a set of <code class="docutils literal notranslate"><span class="pre">Entity</span></code>
objects selected by the selector.</p>
<p>The following <code class="docutils literal notranslate"><span class="pre">parseValue</span></code> method from the <code class="docutils literal notranslate"><span class="pre">CommandElement</span></code> class attempts to parse a selector and return a set of
entities based on the location of the <code class="docutils literal notranslate"><span class="pre">CommandSource</span></code>. If the passed string does not start with <code class="docutils literal notranslate"><span class="pre">&#64;</span></code>, an exception
will be thrown indicating that the passed argument is not a selector.</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="nd">@Override</span>
<span class="kd">protected</span> <span class="n">Object</span> <span class="nf">parseValue</span><span class="p">(</span><span class="n">CommandSource</span> <span class="n">source</span><span class="p">,</span> <span class="n">CommandArgs</span> <span class="n">args</span><span class="p">)</span> <span class="kd">throws</span> <span class="n">ArgumentParseException</span> <span class="p">{</span>
    <span class="n">String</span> <span class="n">nextArg</span> <span class="o">=</span> <span class="n">args</span><span class="p">.</span><span class="na">next</span><span class="p">();</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">nextArg</span><span class="p">.</span><span class="na">startsWith</span><span class="p">(</span><span class="s">&quot;@&quot;</span><span class="p">))</span> <span class="p">{</span>
        <span class="n">Set</span><span class="o">&lt;</span><span class="n">Entity</span><span class="o">&gt;</span> <span class="n">selectedEntities</span><span class="p">;</span>
        <span class="k">try</span> <span class="p">{</span>
            <span class="n">selectedEntities</span> <span class="o">=</span> <span class="n">Selector</span><span class="p">.</span><span class="na">parse</span><span class="p">(</span><span class="n">nextArg</span><span class="p">).</span><span class="na">resolve</span><span class="p">(</span><span class="n">source</span><span class="p">);</span>
        <span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="n">IllegalArgumentException</span> <span class="n">e</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">throw</span> <span class="n">args</span><span class="p">.</span><span class="na">createError</span><span class="p">(</span><span class="n">Text</span><span class="p">.</span><span class="na">of</span><span class="p">(</span><span class="s">&quot;Could not parse selector.&quot;</span><span class="p">));</span>
        <span class="p">}</span>

        <span class="k">if</span> <span class="p">(</span><span class="n">selectedEntities</span><span class="p">.</span><span class="na">isEmpty</span><span class="p">())</span> <span class="p">{</span>
            <span class="k">throw</span> <span class="n">args</span><span class="p">.</span><span class="na">createError</span><span class="p">(</span><span class="n">Text</span><span class="p">.</span><span class="na">of</span><span class="p">(</span><span class="s">&quot;No entities selected.&quot;</span><span class="p">));</span>
        <span class="p">}</span>

        <span class="k">return</span> <span class="n">selectedEntities</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">throw</span> <span class="n">args</span><span class="p">.</span><span class="na">createError</span><span class="p">(</span><span class="n">Text</span><span class="p">.</span><span class="na">of</span><span class="p">(</span><span class="s">&quot;Not a selector.&quot;</span><span class="p">));</span>
<span class="p">}</span>
</pre></div>
</div>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>Look at the <a class="reference external" href="https://github.com/SpongePowered/SpongeAPI/blob/stable-7/src/main/java/org/spongepowered/api/command/args/SelectorCommandElement.java#L40">SelectorCommandElement source code</a>
for an example of how selector parsing is performed in the standard Sponge <code class="docutils literal notranslate"><span class="pre">CommandElements</span></code>.</p>
</div>
</div>
</div>
</div>

           </div>
          </div><footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="flags.html" class="btn btn-neutral float-right" title="Command Flags" accesskey="n" rel="next">Next <span class="fa fa-angle-right"></span></a>
        <a href="creating.html" class="btn btn-neutral" title="Building a Command" accesskey="p" rel="prev"><span class="fa fa-angle-left"></span> Previous</a>
    </div>

    <hr/>

    <section id="license-footer">
        <p>Except where otherwise noted,
            <a xmlns:dct="http://purl.org/dc/terms/" xmlns:cc="http://creativecommons.org/ns#" property="dct:title" rel="cc:attributionURL" href="https://github.com/SpongePowered/SpongeDocs">SpongeDocs</a>
            is licensed under a <a rel="license" href="https://creativecommons.org/licenses/by-sa/4.0/">Creative Commons Attribution-ShareAlike 4.0 International License</a>.
        </p>
        <a id="license-icons" rel="license" href="https://creativecommons.org/licenses/by-sa/4.0/" title="CC-BY-SA" aria-hidden="true">cba</a>
    </section>
</footer>        </div>      </div>

    </section>

  </div>


<div class="rst-versions" data-toggle="rst-versions" role="note" aria-label="versions">
    <span class="rst-current-version" data-toggle="rst-current-version">
        <i class="fa fa-book"> <span>SpongeDocs</span></i>
        v: 7.2.0
        <span class="fa fa-caret-down"></span>
    </span>
    <div id="versions" class="rst-other-versions">




            <dl>
                <dt>Contribute</dt>
                    <dd><a href="https://github.com/SpongePowered/SpongeDocs/blob/PGP-go-bye-bye/source/plugin/commands/arguments.rst">Source</a></dd>
                    <dd><a href="https://github.com/SpongePowered/SpongeDocs/edit/PGP-go-bye-bye/source/plugin/commands/arguments.rst">Edit</a></dd>
            </dl>
    </div>
</div>
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

 
</body>
</html>
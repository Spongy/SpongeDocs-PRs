
<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8">
  <meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Child Commands &mdash; Sponge 7.3.0 documentation</title>

  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />  <link rel="stylesheet" href="../../_static/spongedocs.css" type="text/css" />
    <link rel="shortcut icon" href="../../_static/favicon.ico"/>

  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->      <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>        <script src="../../_static/jquery.js"></script>        <script src="../../_static/underscore.js"></script>        <script src="../../_static/doctools.js"></script>        <script src="../../_static/language_data.js"></script>        <script src="../../_static/spongedocs.js"></script>    <script type="text/javascript" src="../../_static/js/theme.js"></script>

    <link rel="index" title="Index" href="../../genindex.html" />    <link rel="search" title="Search" href="../../search.html" />    <link rel="next" title="The Command Manager" href="service.html" />    <link rel="prev" title="Command Flags" href="flags.html" /></head>

<body class="wy-body-for-nav">

   <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
    <div id="sp-logo-container" class="page-scroll">
        <a class="logo" href="../../index.html">
            <img src="../../_static/spongie-mark-dark.svg">
            <span>Sponge</span>
            <i class="fa fa-fw fa-chevron-down"></i>
        </a>
        <div id="sp-logo-menu">
            <ul id="sp-logo-dropdown">
                <li><a href="https://www.spongepowered.org"><i class="fa-fw fa fa-home"></i>Homepage</a></li>
                <li><a href="https://forums.spongepowered.org"><i class="fa-fw fa fa-comments"></i>Forums</a></li>
                <li><a href="https://github.com/SpongePowered"><i class="fa-fw fa fa-code"></i>Code</a></li>
                <li class="active"><a href="https://docs.spongepowered.org"><i class="fa-fw fa fa-book"></i>Docs</a></li>
                <li><a href="https://jd.spongepowered.org"><i class="fa-fw fa fa-graduation-cap"></i>Javadocs</a></li>
                <li><a href="https://forums.spongepowered.org/c/plugins/plugin-releases"><i class="fa-fw fa fa-plug"></i>Plugins</a></li>
                <li><a href="https://ore.spongepowered.org"><img src="../../_static/ore.svg" alt="" class="fa-fw fa ore-logo">Ore <sup>Beta</sup></a></li>
                <li><a href="https://www.spongepowered.org/downloads"><i class="fa-fw fa fa-download"></i>Downloads</a></li>
                <li><a href="https://www.spongepowered.org/chat"><i class="fa-fw fa fa-comment"></i>Chat</a></li>
            </ul>
        </div>
    </div>

<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../../server/index.html">Creating a Server</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../versions/index.html">Versioning Policy</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../preparing/index.html">Preparing for Development</a></li>
</ul>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">Creating a Plugin</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../api-versions.html">API-Versions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../buildsystem.html">Build Systems</a></li>
<li class="toctree-l2"><a class="reference internal" href="../workspace/index.html">Setting Up Your Workspace</a></li>
<li class="toctree-l2"><a class="reference internal" href="../project/index.html">Setting Up Your Project</a></li>
<li class="toctree-l2"><a class="reference internal" href="../plugin-identifier.html">Plugin Identifiers</a></li>
<li class="toctree-l2"><a class="reference internal" href="../plugin-class.html">Main Plugin Class</a></li>
<li class="toctree-l2"><a class="reference internal" href="../lifecycle.html">Plugin Lifecycle</a></li>
<li class="toctree-l2"><a class="reference internal" href="../injection.html">Dependency Injection</a></li>
<li class="toctree-l2"><a class="reference internal" href="../practices/index.html">Practices</a></li>
<li class="toctree-l2"><a class="reference internal" href="../optional/index.html">Optionals</a></li>
<li class="toctree-l2"><a class="reference internal" href="../logging.html">Logging and Debugging</a></li>
<li class="toctree-l2"><a class="reference internal" href="../text/index.html">Text</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="index.html">Plugin Commands</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="creating.html">Building a Command</a></li>
<li class="toctree-l3"><a class="reference internal" href="arguments.html">Argument Parsing</a></li>
<li class="toctree-l3"><a class="reference internal" href="flags.html">Command Flags</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">Child Commands</a></li>
<li class="toctree-l3"><a class="reference internal" href="service.html">The Command Manager</a></li>
<li class="toctree-l3"><a class="reference internal" href="commandcallable.html">Low-Level Command API</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../event/index.html">Events</a></li>
<li class="toctree-l2"><a class="reference internal" href="../configuration/index.html">Configuring Plugins</a></li>
<li class="toctree-l2"><a class="reference internal" href="../assets.html">The Asset API</a></li>
<li class="toctree-l2"><a class="reference internal" href="../data/index.html">The Data API</a></li>
<li class="toctree-l2"><a class="reference internal" href="../blocks/index.html">Blocks</a></li>
<li class="toctree-l2"><a class="reference internal" href="../entities/index.html">Entities</a></li>
<li class="toctree-l2"><a class="reference internal" href="../items/index.html">Items</a></li>
<li class="toctree-l2"><a class="reference internal" href="../trade-offers.html">Trade-Offers</a></li>
<li class="toctree-l2"><a class="reference internal" href="../effects.html">Effects</a></li>
<li class="toctree-l2"><a class="reference internal" href="../scheduler.html">Scheduler</a></li>
<li class="toctree-l2"><a class="reference internal" href="../services.html">Services</a></li>
<li class="toctree-l2"><a class="reference internal" href="../database.html">Databases</a></li>
<li class="toctree-l2"><a class="reference internal" href="../permissions.html">Permissions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../bans.html">Bans</a></li>
<li class="toctree-l2"><a class="reference internal" href="../metrics.html">Metrics Collection</a></li>
<li class="toctree-l2"><a class="reference internal" href="../bookview.html">Book Views</a></li>
<li class="toctree-l2"><a class="reference internal" href="../economy/index.html">Economy</a></li>
<li class="toctree-l2"><a class="reference internal" href="../placeholders/index.html">Placeholders</a></li>
<li class="toctree-l2"><a class="reference internal" href="../wgen/index.html">World Generation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../manager.html">Plugin Manager</a></li>
<li class="toctree-l2"><a class="reference internal" href="../game-profile-manager.html">Game Profile Manager</a></li>
<li class="toctree-l2"><a class="reference internal" href="../offline-userplayer-data.html">Offline Player Data</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tab-lists.html">Tab Lists</a></li>
<li class="toctree-l2"><a class="reference internal" href="../plugin-meta.html">Plugin Metadata</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ray-tracing.html">Ray Tracing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../debugging.html">Plugin Debugging</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tutorials.html">Tutorials</a></li>
<li class="toctree-l2"><a class="reference internal" href="../internals/index.html">Implementation-dependent Plugins</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../ore/index.html">Ore Documentation</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../contributing/index.html">Contributing to Sponge</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../about/index.html">About the Sponge Project</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      <nav class="wy-nav-top" aria-label="top navigation">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">Sponge</a>
      </nav>


      <div class="wy-nav-content">        <div class="rst-content">






<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home"></a> &raquo;</li>
          <li><a href="../index.html">Creating a Plugin</a> &raquo;</li>
          <li><a href="index.html">Plugin Commands</a> &raquo;</li>
      <li>Child Commands</li>
      <li class="wy-breadcrumbs-aside">
              <a href="https://github.com/SpongePowered/SpongeDocs/blob/dependabot/npm_and_yarn/ua-parser-js-0.7.28/source/plugin/commands/childcommands.rst" class="fa fa-github"> Edit on GitHub</a>
      </li>
  </ul>

  <hr/>
</div>          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">           <div itemprop="articleBody">
  <section id="child-commands">
<h1>Child Commands<a class="headerlink" href="#child-commands" title="Permalink to this headline">¶</a></h1>
<p>The <a class="reference external" href="https://jd.spongepowered.org/7.3.0/org/spongepowered/api/command/spec/CommandSpec.html">CommandSpec</a> builder supports hierarchical command structures like this:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">/mail</span></code> (parent command)</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">/mail</span> <span class="pre">send</span></code> (child command)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">/mail</span> <span class="pre">read</span></code> (child command)</p></li>
</ul>
</li>
</ul>
<p>Every child command is a separate <code class="docutils literal notranslate"><span class="pre">CommandSpec</span></code> and can be created in the same way a regular command is.</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">org.spongepowered.api.text.Text</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">org.spongepowered.api.command.spec.CommandSpec</span><span class="p">;</span>

<span class="c1">// /mail read</span>
<span class="n">CommandSpec</span> <span class="n">readCmd</span> <span class="o">=</span> <span class="n">CommandSpec</span><span class="p">.</span><span class="na">builder</span><span class="p">()</span>
    <span class="p">.</span><span class="na">permission</span><span class="p">(</span><span class="s">&quot;myplugin.mail.read&quot;</span><span class="p">)</span>
    <span class="p">.</span><span class="na">description</span><span class="p">(</span><span class="n">Text</span><span class="p">.</span><span class="na">of</span><span class="p">(</span><span class="s">&quot;Read your inbox&quot;</span><span class="p">))</span>
    <span class="p">.</span><span class="na">executor</span><span class="p">(...)</span>
    <span class="p">.</span><span class="na">build</span><span class="p">();</span>

<span class="c1">// /mail send</span>
<span class="n">CommandSpec</span> <span class="n">sendCmd</span> <span class="o">=</span> <span class="n">CommandSpec</span><span class="p">.</span><span class="na">builder</span><span class="p">()</span>
    <span class="p">.</span><span class="na">permission</span><span class="p">(</span><span class="s">&quot;myplugin.mail.send&quot;</span><span class="p">)</span>
    <span class="p">.</span><span class="na">description</span><span class="p">(</span><span class="n">Text</span><span class="p">.</span><span class="na">of</span><span class="p">(</span><span class="s">&quot;Send a mail&quot;</span><span class="p">))</span>
    <span class="p">.</span><span class="na">arguments</span><span class="p">(...)</span>
    <span class="p">.</span><span class="na">executor</span><span class="p">(...)</span>
    <span class="p">.</span><span class="na">build</span><span class="p">();</span>
</pre></div>
</div>
<p>Instead of registering them to the command service, child commands are registered on their parent command using the
<a class="reference external" href="https://jd.spongepowered.org/7.3.0/org/spongepowered/api/command/spec/CommandSpec.Builder.html#child-org.spongepowered.api.command.CommandCallable-java.lang.String...-">CommandSpec.Builder#child(CommandCallable, String…)</a> method. They are registered with a list of aliases.
The first alias supplied is the primary one and will appear in the usage message.</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">org.spongepowered.api.Sponge</span><span class="p">;</span>

<span class="n">PluginContainer</span> <span class="n">plugin</span> <span class="o">=</span> <span class="p">...;</span>

<span class="n">CommandSpec</span> <span class="n">mailCommandSpec</span> <span class="o">=</span> <span class="n">CommandSpec</span><span class="p">.</span><span class="na">builder</span><span class="p">()</span>
    <span class="p">.</span><span class="na">permission</span><span class="p">(</span><span class="s">&quot;myplugin.mail.base&quot;</span><span class="p">)</span>
    <span class="p">.</span><span class="na">description</span><span class="p">(</span><span class="n">Text</span><span class="p">.</span><span class="na">of</span><span class="p">(</span><span class="s">&quot;Send and receive mails&quot;</span><span class="p">))</span>
    <span class="p">.</span><span class="na">child</span><span class="p">(</span><span class="n">readCmd</span><span class="p">,</span> <span class="s">&quot;read&quot;</span><span class="p">,</span> <span class="s">&quot;r&quot;</span><span class="p">,</span> <span class="s">&quot;inbox&quot;</span><span class="p">)</span>
    <span class="p">.</span><span class="na">child</span><span class="p">(</span><span class="n">sendCmd</span><span class="p">,</span> <span class="s">&quot;send&quot;</span><span class="p">,</span> <span class="s">&quot;s&quot;</span><span class="p">,</span> <span class="s">&quot;write&quot;</span><span class="p">)</span>
    <span class="p">.</span><span class="na">build</span><span class="p">();</span>

<span class="n">Sponge</span><span class="p">.</span><span class="na">getCommandManager</span><span class="p">().</span><span class="na">register</span><span class="p">(</span><span class="n">plugin</span><span class="p">,</span> <span class="n">mailCommandSpec</span><span class="p">,</span> <span class="s">&quot;mail&quot;</span><span class="p">,</span> <span class="s">&quot;email&quot;</span><span class="p">);</span>
</pre></div>
</div>
<section id="fallback-behavior">
<h2>Fallback Behavior<a class="headerlink" href="#fallback-behavior" title="Permalink to this headline">¶</a></h2>
<p>If a command has child commands, a <a class="reference external" href="https://jd.spongepowered.org/7.3.0/org/spongepowered/api/command/spec/CommandExecutor.html">CommandExecutor</a>, set through
<a class="reference external" href="https://jd.spongepowered.org/7.3.0/org/spongepowered/api/command/spec/CommandSpec.Builder.html#executor-org.spongepowered.api.command.spec.CommandExecutor-">CommandSpec.Builder#executor(CommandExecutor)</a> and their associated
<a class="reference external" href="https://jd.spongepowered.org/7.3.0/org/spongepowered/api/command/spec/CommandSpec.Builder.html#arguments-org.spongepowered.api.command.args.CommandElement-">CommandSpec.Builder#arguments(CommandElement)</a> are optional. The behavior of error in selection and
argument parsing of child commands is dependent on whether this parent executor exists.</p>
<p>If a parent executor has not been set, then if the requested child command could not be found or the arguments
cannot be parsed, then an <a class="reference external" href="https://jd.spongepowered.org/7.3.0/org/spongepowered/api/command/args/ArgumentParseException.html">ArgumentParseException</a> will be thrown.</p>
<p>If a parent executor has been set for the parent command, it is used as a fallback if the first argument does
not match one of the child command aliases. If a child command is selected but the arguments do not parse, one of
the following will happen based on what <a class="reference external" href="https://jd.spongepowered.org/7.3.0/org/spongepowered/api/command/spec/CommandSpec.Builder.html#childArgumentParseExceptionFallback-boolean-">CommandSpec.Builder#childArgumentParseExceptionFallback(boolean)</a>
is set to:</p>
<ul class="simple">
<li><p>If <cite>true</cite> (the default), the <a class="reference external" href="https://jd.spongepowered.org/7.3.0/org/spongepowered/api/command/args/ArgumentParseException.html">ArgumentParseException</a> is discarded and the arguments from the parent
commands are parsed. If they fail, the exception for the parent command will be displayed. This is the same
behavior as previous API revisions, where child command argument parsing exceptions will not be displayed.</p></li>
<li><p>If <cite>false</cite>, the parent executor is not executed and the <a class="reference external" href="https://jd.spongepowered.org/7.3.0/org/spongepowered/api/command/args/ArgumentParseException.html">ArgumentParseException</a> is thrown, returning
the exception from the child command argument that failed to parse, but may prevent some combination of parent
commands and arguments from being executed (if the first argument of the fallback could be the same as the
child command).</p></li>
</ul>
<p>In all cases, if the arguments parse successfully but the child executor throws an exception, the fallback
executor (if any) is not executed and the error message from the child executor is displayed.</p>
</section>
</section>

           </div>
          </div><footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="service.html" class="btn btn-neutral float-right" title="The Command Manager" accesskey="n" rel="next">Next <span class="fa fa-angle-right"></span></a>
        <a href="flags.html" class="btn btn-neutral" title="Command Flags" accesskey="p" rel="prev"><span class="fa fa-angle-left"></span> Previous</a>
    </div>

    <hr/>

    <section id="license-footer">
        <p>Except where otherwise noted,
            <a xmlns:dct="http://purl.org/dc/terms/" xmlns:cc="http://creativecommons.org/ns#" property="dct:title" rel="cc:attributionURL" href="https://github.com/SpongePowered/SpongeDocs">SpongeDocs</a>
            is licensed under a <a rel="license" href="https://creativecommons.org/licenses/by-sa/4.0/">Creative Commons Attribution-ShareAlike 4.0 International License</a>.
        </p>
        <a id="license-icons" rel="license" href="https://creativecommons.org/licenses/by-sa/4.0/" title="CC-BY-SA" aria-hidden="true">cba</a>
    </section>
</footer>        </div>      </div>

    </section>

  </div>


<div class="rst-versions" data-toggle="rst-versions" role="note" aria-label="versions">
    <span class="rst-current-version" data-toggle="rst-current-version">
        <i class="fa fa-book"> <span>SpongeDocs</span></i>
        v: 7.3.0
        <span class="fa fa-caret-down"></span>
    </span>
    <div id="versions" class="rst-other-versions">




            <dl>
                <dt>Contribute</dt>
                    <dd><a href="https://github.com/SpongePowered/SpongeDocs/blob/dependabot/npm_and_yarn/ua-parser-js-0.7.28/source/plugin/commands/childcommands.rst">Source</a></dd>
                    <dd><a href="https://github.com/SpongePowered/SpongeDocs/edit/dependabot/npm_and_yarn/ua-parser-js-0.7.28/source/plugin/commands/childcommands.rst">Edit</a></dd>
            </dl>
    </div>
</div>
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

 
</body>
</html>

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Access Transformers &mdash; Sponge 7.2.0 documentation</title>

    <link rel="shortcut icon" href="../../_static/favicon.ico"/>




    <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />

    <link rel="stylesheet" href="../../_static/spongedocs.css" type="text/css" />

        <link rel="index" title="Index"
              href="../../genindex.html"/>        <link rel="search" title="Search" href="../../search.html"/>    <link rel="top" title="Sponge 7.2.0 documentation" href="../../index.html"/>        <link rel="up" title="Implementation-dependent Plugins" href="index.html"/>        <link rel="next" title="Plugin Mixins" href="mixins.html"/>        <link rel="prev" title="Using MCP in Plugins" href="mcp-setup.html"/>
    <!-- Google Analytics -->
    <script>
        (function(S,p,o,n,g,i,e){S['GoogleAnalyticsObject']=g;S[g]=S[g]||function(){
        (S[g].q=S[g].q||[]).push(arguments)},S[g].l=1*new Date();i=p.createElement(o),
        e=p.getElementsByTagName(o)[0];i.async=1;i.src=n;e.parentNode.insertBefore(i,e)
        })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

        ga('create', 'UA-59476017-2', 'auto');
        ga('send', 'pageview');
    </script>

  <script src="../../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
    <div id="sp-logo-container" class="page-scroll">
        <a class="logo" href="../../index.html">
            <img src="../../_static/spongie-mark-dark.svg">
            <span>Sponge</span>
            <i class="fa fa-fw fa-chevron-down"></i>
        </a>
        <div id="sp-logo-menu">
            <ul id="sp-logo-dropdown">
                <li><a href="https://www.spongepowered.org"><i class="fa-fw fa fa-home"></i>Homepage</a></li>
                <li><a href="https://forums.spongepowered.org"><i class="fa-fw fa fa-comments"></i>Forums</a></li>
                <li><a href="https://github.com/SpongePowered"><i class="fa-fw fa fa-code"></i>Code</a></li>
                <li class="active"><a href="https://docs.spongepowered.org"><i class="fa-fw fa fa-book"></i>Docs</a></li>
                <li><a href="https://jd.spongepowered.org"><i class="fa-fw fa fa-graduation-cap"></i>Javadocs</a></li>
                <li><a href="https://forums.spongepowered.org/c/plugins/plugin-releases"><i class="fa-fw fa fa-plug"></i>Plugins</a></li>
                <li><a href="https://ore.spongepowered.org"><img src="../../_static/ore.svg" alt="" class="fa-fw fa ore-logo">Ore <sup>Beta</sup></a></li>
                <li><a href="https://www.spongepowered.org/downloads"><i class="fa-fw fa fa-download"></i>Downloads</a></li>
                <li><a href="https://www.spongepowered.org/chat"><i class="fa-fw fa fa-comment"></i>Chat</a></li>
            </ul>
        </div>
    </div>

<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
                <ul>
<li class="toctree-l1"><a class="reference internal" href="../../server/index.html">Creating a Server</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../versions/index.html">Versioning Policy</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../preparing/index.html">Preparing for Development</a></li>
</ul>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">Creating a Plugin</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../api-versions.html">API-Versions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../buildsystem.html">Build Systems</a></li>
<li class="toctree-l2"><a class="reference internal" href="../workspace/index.html">Setting Up Your Workspace</a></li>
<li class="toctree-l2"><a class="reference internal" href="../project/index.html">Setting Up Your Project</a></li>
<li class="toctree-l2"><a class="reference internal" href="../plugin-identifier.html">Plugin Identifiers</a></li>
<li class="toctree-l2"><a class="reference internal" href="../plugin-class.html">Main Plugin Class</a></li>
<li class="toctree-l2"><a class="reference internal" href="../lifecycle.html">Plugin Lifecycle</a></li>
<li class="toctree-l2"><a class="reference internal" href="../injection.html">Dependency Injection</a></li>
<li class="toctree-l2"><a class="reference internal" href="../practices/index.html">Practices</a></li>
<li class="toctree-l2"><a class="reference internal" href="../optional/index.html">Optionals</a></li>
<li class="toctree-l2"><a class="reference internal" href="../logging.html">Logging and Debugging</a></li>
<li class="toctree-l2"><a class="reference internal" href="../text/index.html">Text</a></li>
<li class="toctree-l2"><a class="reference internal" href="../commands/index.html">Plugin Commands</a></li>
<li class="toctree-l2"><a class="reference internal" href="../event/index.html">Events</a></li>
<li class="toctree-l2"><a class="reference internal" href="../configuration/index.html">Configuring Plugins</a></li>
<li class="toctree-l2"><a class="reference internal" href="../assets.html">The Asset API</a></li>
<li class="toctree-l2"><a class="reference internal" href="../data/index.html">The Data API</a></li>
<li class="toctree-l2"><a class="reference internal" href="../blocks/index.html">Blocks</a></li>
<li class="toctree-l2"><a class="reference internal" href="../entities/index.html">Entities</a></li>
<li class="toctree-l2"><a class="reference internal" href="../items/index.html">Items</a></li>
<li class="toctree-l2"><a class="reference internal" href="../trade-offers.html">Trade-Offers</a></li>
<li class="toctree-l2"><a class="reference internal" href="../effects.html">Effects</a></li>
<li class="toctree-l2"><a class="reference internal" href="../scheduler.html">Scheduler</a></li>
<li class="toctree-l2"><a class="reference internal" href="../services.html">Services</a></li>
<li class="toctree-l2"><a class="reference internal" href="../database.html">Databases</a></li>
<li class="toctree-l2"><a class="reference internal" href="../permissions.html">Permissions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../bans.html">Bans</a></li>
<li class="toctree-l2"><a class="reference internal" href="../metrics.html">Metrics Collection</a></li>
<li class="toctree-l2"><a class="reference internal" href="../bookview.html">Book Views</a></li>
<li class="toctree-l2"><a class="reference internal" href="../economy/index.html">Economy</a></li>
<li class="toctree-l2"><a class="reference internal" href="../wgen/index.html">World Generation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../manager.html">Plugin Manager</a></li>
<li class="toctree-l2"><a class="reference internal" href="../game-profile-manager.html">Game Profile Manager</a></li>
<li class="toctree-l2"><a class="reference internal" href="../offline-userplayer-data.html">Offline Player Data</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tab-lists.html">Tab Lists</a></li>
<li class="toctree-l2"><a class="reference internal" href="../plugin-meta.html">Plugin Metadata</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ray-tracing.html">Ray Tracing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../debugging.html">Plugin Debugging</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tutorials.html">Tutorials</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="index.html">Implementation-dependent Plugins</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="mcp.html">MCP (Mod Coder Pack)</a></li>
<li class="toctree-l3"><a class="reference internal" href="mcp-setup.html">Using MCP in Plugins</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">Access Transformers</a></li>
<li class="toctree-l3"><a class="reference internal" href="mixins.html">Plugin Mixins</a></li>
<li class="toctree-l3"><a class="reference internal" href="implementation.html">Internal Sponge Classes</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../ore/index.html">Ore Documentation</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../contributing/index.html">Contributing to Sponge</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../about/index.html">About the Sponge Project</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../../index.html">Sponge</a>
      </nav>


      <div class="wy-nav-content">
        <div class="rst-content">

 

<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../../index.html">Docs</a> &raquo;</li>
          <li><a href="../index.html">Creating a Plugin</a> &raquo;</li>
          <li><a href="index.html">Implementation-dependent Plugins</a> &raquo;</li>
    <li>Access Transformers</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../_sources/plugin/internals/access-transformers.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
  <div class="section" id="access-transformers">
<h1>Access Transformers<a class="headerlink" href="#access-transformers" title="Permalink to this headline">¶</a></h1>
<p>Since some parts of the Minecraft code were not designed to be used from the outside, you may find yourself in a
situation in which you need to access a field or method that is not public. While you would normally use reflection to
access the field or method, MCP will make this more difficult since you have two different names - the MCP names in the
development environment and the Searge names in production.</p>
<p>For example to access the method <code class="docutils literal notranslate"><span class="pre">tick()</span></code> using reflection you would need to use <code class="docutils literal notranslate"><span class="pre">tick</span></code> in the development
environment, but <code class="docutils literal notranslate"><span class="pre">func_71217_p</span></code> in production. The re-obfuscation step only handles direct references to methods
and fields, not the string parameter passed to the reflection call.</p>
<p>As a solution, ForgeGradle supports using access transformers (or AT) that automatically make the specified
methods/fields public so you can reference them directly (without reflection). While they are primarily intended for
usage with the Minecraft code base, they can be also applied to classes from other projects. If configured in the JAR
manifest of the plugin, SpongeVanilla and Forge will also apply them in production.</p>
<div class="section" id="setup">
<h2>Setup<a class="headerlink" href="#setup" title="Permalink to this headline">¶</a></h2>
<p>ForgeGradle will automatically scan for access transformer files with the file name suffix <code class="docutils literal notranslate"><span class="pre">_at.cfg</span></code> in your resource
folders. To be able to use the access transformer at runtime, you need to add them to a <code class="docutils literal notranslate"><span class="pre">META-INF</span></code> folder in your
resource directory, for example <code class="docutils literal notranslate"><span class="pre">META-INF/myplugin_at.cfg</span></code>.</p>
<p>There are 3 different types of access transformers: you can change the modifiers of classes, fields and methods.
An access transformer line is defined by 2 parts (for classes) or 3 parts (for fields and methods), each separated by a
space.</p>
<ul class="simple">
<li>The access type you want to change the method/field to, e.g. <code class="docutils literal notranslate"><span class="pre">public</span></code> or <code class="docutils literal notranslate"><span class="pre">protected</span></code>. To remove <code class="docutils literal notranslate"><span class="pre">final</span></code> from a
field, append <code class="docutils literal notranslate"><span class="pre">-f</span></code> after the access type, e.g. <code class="docutils literal notranslate"><span class="pre">public-f</span></code>.</li>
<li>Full qualified class name, e.g. <code class="docutils literal notranslate"><span class="pre">net.minecraft.server.MinecraftServer</span></code></li>
<li>For fields and methods: Searge field name or method name and method signature, e.g. <code class="docutils literal notranslate"><span class="pre">field_54654_a</span></code> or <code class="docutils literal notranslate"><span class="pre">func_4444_a()V</span></code></li>
</ul>
<div class="admonition tip">
<p class="first admonition-title">Tip</p>
<p class="last">You can add comments by prefixing them with <code class="docutils literal notranslate"><span class="pre">#</span></code>. A good convention is to add the MCP name after each access
transformer line so you know which field/method the line is referring to.</p>
</div>
<p>Here are two examples for access transformer lines:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">public</span><span class="o">-</span><span class="n">f</span> <span class="n">net</span><span class="o">.</span><span class="n">minecraft</span><span class="o">.</span><span class="n">server</span><span class="o">.</span><span class="n">MinecraftServer</span> <span class="n">field_71308_o</span> <span class="c1"># anvilFile</span>
<span class="n">public</span> <span class="n">net</span><span class="o">.</span><span class="n">minecraft</span><span class="o">.</span><span class="n">server</span><span class="o">.</span><span class="n">MinecraftServer</span> <span class="n">func_71260_j</span><span class="p">()</span><span class="n">V</span> <span class="c1"># stopServer</span>
<span class="n">public</span><span class="o">-</span><span class="n">f</span> <span class="n">net</span><span class="o">.</span><span class="n">minecraft</span><span class="o">.</span><span class="n">item</span><span class="o">.</span><span class="n">ItemStack</span>
</pre></div>
</div>
<p>To apply the access transformers to your development environment, run the Gradle <code class="docutils literal notranslate"><span class="pre">setupDecompWorkspace</span></code> task again and
refresh your Gradle project:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>gradle setupDecompWorkspace
</pre></div>
</div>
<div class="admonition tip">
<p class="first admonition-title">Tip</p>
<p class="last">You can use the <a class="reference external" href="http://mcpbot.bspk.rs/help">MCP bot</a> which is present in the MCP and Sponge IRC channels,
or in the <code class="docutils literal notranslate"><span class="pre">#bot-spam</span></code> channel on Discord, to quickly get the access transformer line for a field or method.
After looking up a method using <code class="docutils literal notranslate"><span class="pre">!gm</span> <span class="pre">&lt;mcp</span> <span class="pre">method</span> <span class="pre">name&gt;</span></code> or a field using <code class="docutils literal notranslate"><span class="pre">!gf</span> <span class="pre">&lt;mcp</span> <span class="pre">field</span> <span class="pre">name&gt;</span></code>,
simply copy the listed <code class="docutils literal notranslate"><span class="pre">AT</span></code> line to your access transformer file.</p>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Making a field/method less accessible (e.g. <code class="docutils literal notranslate"><span class="pre">public</span></code> -&gt; <code class="docutils literal notranslate"><span class="pre">private</span></code>) is not supported.</p>
</div>
<div class="section" id="production">
<h3>Production<a class="headerlink" href="#production" title="Permalink to this headline">¶</a></h3>
<p>To apply the access transformers in production, you need to add a <code class="docutils literal notranslate"><span class="pre">FMLAT</span></code> manifest entry to your plugin with the file
name of your access transformer in the <code class="docutils literal notranslate"><span class="pre">META-INF</span></code> directory.</p>
<div class="highlight-groovy notranslate"><div class="highlight"><pre><span></span><span class="n">jar</span> <span class="o">{</span>
    <span class="n">manifest</span><span class="o">.</span><span class="na">attributes</span><span class="o">(</span><span class="s1">&#39;FMLAT&#39;</span><span class="o">:</span> <span class="s1">&#39;myplugin_at.cfg&#39;</span><span class="o">)</span>
<span class="o">}</span>
</pre></div>
</div>
</div>
</div>
</div>

           </div>
          </div>
<footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="mixins.html" class="btn btn-neutral float-right" title="Plugin Mixins" accesskey="n" rel="next">Next <span class="fa fa-angle-right"></span></a>
        <a href="mcp-setup.html" class="btn btn-neutral" title="Using MCP in Plugins" accesskey="p" rel="prev"><span class="fa fa-angle-left"></span> Previous</a>
    </div>

    <hr/>

    <section id="license-footer">
        <p>Except where otherwise noted,
            <a xmlns:dct="http://purl.org/dc/terms/" xmlns:cc="http://creativecommons.org/ns#" property="dct:title" rel="cc:attributionURL" href="https://github.com/SpongePowered/SpongeDocs">SpongeDocs</a>
            is licensed under a <a rel="license" href="https://creativecommons.org/licenses/by-sa/4.0/">Creative Commons Attribution-ShareAlike 4.0 International License</a>.
        </p>
        <a id="license-icons" rel="license" href="https://creativecommons.org/licenses/by-sa/4.0/" title="CC-BY-SA" aria-hidden="true">cba</a>
    </section>
</footer>        </div>
      </div>

    </section>

  </div>


<div class="rst-versions" data-toggle="rst-versions" role="note" aria-label="versions">
    <span class="rst-current-version" data-toggle="rst-current-version">
        <i class="fa fa-book"> <span>SpongeDocs</span></i>
        v: 7.2.0
        <span class="fa fa-caret-down"></span>
    </span>
    <div id="versions" class="rst-other-versions">




    </div>
</div>

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../../',
            VERSION:'7.2.0',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>      <script type="text/javascript" src="../../_static/jquery.js"></script>      <script type="text/javascript" src="../../_static/underscore.js"></script>      <script type="text/javascript" src="../../_static/doctools.js"></script>      <script type="text/javascript" src="../../_static/language_data.js"></script>      <script type="text/javascript" src="../../_static/spongedocs.js"></script>

    <script type="text/javascript" src="../../_static/js/theme.js"></script>

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
 
</body>
</html>
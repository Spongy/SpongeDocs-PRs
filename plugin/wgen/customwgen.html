<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">




<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
     <title>Modifying World Generation &mdash; Sponge 2.1-SNAPSHOT documentation</title>
    
  <link rel="stylesheet" href="../../_static/basic.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/sponge.css" type="text/css" />
  <link href='//fonts.googleapis.com/css?family=Source+Code+Pro|Roboto:400italic,700italic,700,400' rel='stylesheet' type='text/css'>
  <link rel="stylesheet" href="../../_static/tomorrow.css" type="text/css" />
  <link id="syntax-highlighting-ref" rel="stylesheet" href="../../_static/tomorrow_night.css" type="text/css" />
      
  <script type="text/javascript">
    var DOCUMENTATION_OPTIONS = {
      URL_ROOT:    '../../',
      VERSION:     '2.1-SNAPSHOT',
      COLLAPSE_INDEX: false,
      FILE_SUFFIX: '.html',
      HAS_SOURCE:  true
    };
  </script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <script type="text/javascript" src="../../_static/store.min.js"></script>
    <script type="text/javascript" src="../../_static/lights.js"></script>
        <link rel="top" title="Sponge 2.1-SNAPSHOT documentation" href="../../index.html" />
    
  <script type="text/javascript">
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-59476017-2', 'auto');
    ga('send', 'pageview');

  </script> 
  </head>
  <body role="document">
    <div class="container">
  <div class="related" role="navigation" aria-label="related navigation">
    <h3>Navigation</h3>
    <ul>
      <span style="float: right" class="lights" title="Toggles syntax highlighting between light and dark">
        <i class="icon-lamp lights-icon"></i> Highlight Code Light/Dark
      </span>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li><a href="../../index.html">Sponge 2.1-SNAPSHOT documentation</a> &raquo;</li> 
    </ul>
  </div> 
    <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
      <div class="sphinxsidebarwrapper">
<div id="searchbox" style="display: none" role="search">
    <form class="search" action="../../search.html" method="get">
      <div class="searchbox-inner">
        <input class="field" type="text" name="q" autocomplete="off" />
        <button class="submit" type="submit"><i class="icon-search"></i></button>
        <input type="hidden" name="check_keywords" value="yes" />
        <input type="hidden" name="area" value="default" />
      </div>
    </form>
    <p class="searchtip" style="font-size: 90%"></p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script><h3><a href="../../index.html">Table Of Contents</a></h3>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../server/index.html">Creating a Server</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../server/getting-started/index.html">Getting Started</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../server/getting-started/jre.html">Installing Java</a><ul class="simple">
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../server/getting-started/migrating.html">Migrating to Sponge</a><ul class="simple">
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../server/getting-started/implementations/index.html">Choosing an Implementation</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../server/getting-started/implementations/spongeforge.html">SpongeForge</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../server/getting-started/implementations/spongevanilla.html">SpongeVanilla</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../server/getting-started/installation.html">Installing Sponge</a><ul class="simple">
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../server/getting-started/launch-script.html">Creating a Launch Script</a><ul class="simple">
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../server/getting-started/port-forward.html">Port Forwarding</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../server/getting-started/configuration/index.html">Configuring Sponge</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../server/getting-started/configuration/hocon.html">Introduction to HOCON</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../server/getting-started/configuration/json.html">JSON Syntax</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../server/getting-started/configuration/sponge-conf.html">global.conf</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../server/getting-started/configuration/server-properties.html">server.properties</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../server/management/index.html">Server Management</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../server/management/whitelist.html">Managing the Whitelist</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../server/management/bans.html">Managing Bans</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../server/management/permissions.html">Managing Permissions</a><ul class="simple">
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../server/management/plugins.html">Installing Plugins</a><ul class="simple">
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../server/spongineer/index.html">Becoming an Expert Spongineer</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../server/spongineer/commands.html">Commands</a><ul class="simple">
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../server/spongineer/troubleshooting.html">Troubleshooting</a><ul class="simple">
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../server/spongineer/logs.html">Log Files</a><ul class="simple">
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../server/spongineer/debugging.html">Debugging</a><ul class="simple">
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../preparing/index.html">Preparing for Development</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../preparing/jdk.html">Installing the JDK</a><ul class="simple">
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../preparing/ide.html">Installing an IDE</a><ul class="simple">
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../preparing/text.html">Installing a Text Editor</a><ul class="simple">
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../preparing/git.html">Installing Git</a><ul class="simple">
</ul>
</li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../index.html">Creating a Plugin</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../workspace/index.html">Setting Up Your Workspace</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../workspace/idea.html">Setting Up IntelliJ IDEA</a><ul class="simple">
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../workspace/eclipse.html">Setting Up Eclipse</a><ul class="simple">
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../workspace/netbeans.html">Setting Up NetBeans</a><ul class="simple">
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../workspace/dependencies.html">Adding Sponge API Dependencies</a><ul class="simple">
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../practices.html">Best Practices</a><ul class="simple">
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../templates.html">Plugin Templates</a><ul class="simple">
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../main-class.html">Creating Your Main Plugin Class</a><ul class="simple">
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../lifecycle.html">Plugin Lifecycle</a><ul class="simple">
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../logging.html">Logging and Debugging</a><ul class="simple">
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../text/index.html">Working with Text</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../text/text.html">Creating Text</a><ul class="simple">
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../text/pagination.html">The Pagination Service</a><ul class="simple">
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../commands/index.html">Creating Commands</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../commands/creating.html">Building a Command</a><ul class="simple">
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../commands/arguments.html">Argument Parsing</a><ul class="simple">
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../commands/childcommands.html">Child Commands</a></li>
<li class="toctree-l3"><a class="reference internal" href="../commands/service.html">The Command Service</a></li>
<li class="toctree-l3"><a class="reference internal" href="../commands/commandcallable.html">Low-Level Command API</a><ul class="simple">
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../events.html">Working with Events</a><ul class="simple">
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../configuration/index.html">Configuring Your Plugin</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../configuration/loaders.html">Configuration Loaders</a><ul class="simple">
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../configuration/nodes.html">Configuration Nodes</a><ul class="simple">
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../configuration/paths.html">Navigating Through Nodes</a><ul class="simple">
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../configuration/values.html">Giving Nodes Value</a><ul class="simple">
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../configuration/serialization.html">Serializing Objects</a><ul class="simple">
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../data/index.html">The Data API</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../data/keys.html">Using Keys</a><ul class="simple">
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../data/datamanipulators.html">Data Manipulators</a><ul class="simple">
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../data/transactions.html">Transactions</a><ul class="simple">
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../data/serialization.html">Serializing Data</a><ul class="simple">
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../blocks/index.html">Working with Blocks</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../blocks/concepts.html">Concepts</a><ul class="simple">
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../blocks/accessing.html">Accessing Blocks</a><ul class="simple">
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../blocks/modifying.html">Modifying Blocks</a><ul class="simple">
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../blocks/tileentities.html">Working with Tile Entities</a><ul class="simple">
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../entities/index.html">Working with Entities</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../entities/spawning.html">Spawning an Entity</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../items.html">Working with Items</a><ul class="simple">
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../injection.html">Dependency Injection</a><ul class="simple">
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../scheduler.html">Using the Scheduler</a><ul class="simple">
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../database.html">Working with Databases</a><ul class="simple">
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../permissions.html">Working with the Permissions API</a></li>
<li class="toctree-l2"><a class="reference internal" href="../services.html">Working with Services</a><ul class="simple">
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../manager.html">Using the Plugin Manager</a><ul class="simple">
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../debugging.html">Plugin Debugging</a><ul class="simple">
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../message-sinks.html">Message Sinks</a><ul class="simple">
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../tutorials.html">Tutorials</a><ul class="simple">
</ul>
</li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../contributing/index.html">Contributing to Sponge</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../contributing/guidelines.html">Contribution Guidelines</a><ul class="simple">
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../contributing/api/index.html">API Development</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../contributing/api/git.html">Git Workflow for SpongeAPI</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../contributing/implementation/index.html">Implementation Development</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../contributing/implementation/debugging.html">Debugging Sponge Within the IDE</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../contributing/implementation/mixins.html">Mixins</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../contributing/implementation/git.html">Git Workflow for Sponge implementations</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../contributing/implementation/datamanipulator.html">Implementing DataManipulators</a><ul class="simple">
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../contributing/spongedocs.html">SpongeDocs Writing</a><ul class="simple">
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../contributing/porting.html">Porting Sponge to Other Platforms</a><ul class="simple">
</ul>
</li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../about/index.html">About the Sponge Project</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../about/introduction.html">Introduction</a><ul class="simple">
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../about/faq.html">Frequently Asked Questions</a><ul class="simple">
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../about/future.html">Plans for the Future</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../about/license.html">License</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../about/posting.html">Forum Posting Guidelines</a><ul class="simple">
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../about/rules.html">Forum &amp; IRC Rules</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../about/staff.html">Staff</a><ul class="simple">
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../about/glossary.html">Sponge Glossary</a><ul class="simple">
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../about/assets.html">Art Assets</a><ul class="simple">
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../about/history.html">The History of Sponge</a><ul class="simple">
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../downloads.html">Download</a><ul class="simple">
</ul>
</li>
</ul>
<ul class="simple">
</ul>

      </div>
    </div> 

        <div class="document">
            <div class="documentwrapper">
              <div class="bodywrapper">
                <div class="body" role="main">
                  
  <div class="section" id="modifying-world-generation">
<h1>Modifying World Generation<a class="headerlink" href="#modifying-world-generation" title="Permalink to this headline">¶</a></h1>
<ul class="simple">
<li>Creating a WorldGeneratorModifer</li>
<li>Registering a WorldGeneratorModifer</li>
<li>Modifying Vanilla Generation</li>
<li>Creating Custom Base Terrain</li>
<li>Creating Custom GenerationPopulators</li>
<li>Creating Custom Populators</li>
<li>Creating Custom Biomes</li>
</ul>
<p>For a brief overview of the World Generation process in Sponge, please read <tt class="xref doc docutils literal"><span class="pre">../wgen-index</span></tt>.
Now, let&#8217;s show how you can begin making your mark on world generation.
All plugins wishing to make changes to a worlds generator must register a <tt class="docutils literal"><span class="pre">WorldGeneratorModifier</span></tt>.
These modifiers are registered globally with a unique name, which must be added to the config of a world
by a server admin. With the name specified in the world config, a <tt class="docutils literal"><span class="pre">WorldGeneratorModifer</span></tt> will be
automatically called when the generator for that world is set up, allowing it to make changes to the generator.</p>
<div class="section" id="creating-a-worldgeneratormodifer">
<h2>Creating a WorldGeneratorModifer<a class="headerlink" href="#creating-a-worldgeneratormodifer" title="Permalink to this headline">¶</a></h2>
<p>Let&#8217;s start with the format of a <tt class="docutils literal"><span class="pre">WorldGeneratorModifier</span></tt>. First, you need a class which implements
the WorldGeneratorModifier interface:</p>
<div class="highlight-java"><div class="highlight"><pre><span class="kd">public</span> <span class="kd">class</span> <span class="nc">MyModifier</span> <span class="kd">implements</span> <span class="n">WorldGeneratorModifier</span> <span class="o">{</span>

        <span class="nd">@Override</span>
        <span class="kd">public</span> <span class="n">String</span> <span class="nf">getId</span><span class="o">()</span> <span class="o">{</span>
                <span class="k">return</span> <span class="s">&quot;myplugin:mymodifier&quot;</span>
        <span class="o">}</span>

        <span class="nd">@Override</span>
        <span class="kd">public</span> <span class="kt">void</span> <span class="nf">modifyWorldGenerator</span><span class="o">(</span><span class="n">WorldCreationSettings</span> <span class="n">world</span><span class="o">,</span> <span class="n">DataContainer</span> <span class="n">settings</span><span class="o">,</span> <span class="n">WorldGenerator</span> <span class="n">worldGenerator</span><span class="o">)</span> <span class="o">{</span>
                <span class="c1">//Make changes here</span>
        <span class="o">}</span>
<span class="o">}</span>
</pre></div>
</div>
<p>As you can see, <tt class="docutils literal"><span class="pre">WorldGeneratorModifier</span></tt> has two methods which we override. The first method is <tt class="docutils literal"><span class="pre">getId()</span></tt>,
which must be overridden to return a constant and unique identifier for your <tt class="docutils literal"><span class="pre">WorldGeneratorModifier</span></tt>.
This value will be used to refer to your <tt class="docutils literal"><span class="pre">WorldGeneratorModifier</span></tt> from the world configuration.</p>
<p>The second overridden method is where you make your changes to the world generator. This method is called by
the implementation when it is creating the world generator for a world which has specified that your
<tt class="docutils literal"><span class="pre">WorldGeneratorModifier</span></tt> should be applied.</p>
<p>The <tt class="docutils literal"><span class="pre">WorldGenerationSettings</span></tt> and a <tt class="docutils literal"><span class="pre">DataContainer</span></tt> of additional properties for the world are passed to this method
in order to give context for your changes. For instance, you can use the <tt class="docutils literal"><span class="pre">WorldCreationSettings</span></tt> to only apply your
generator changes to nether worlds.</p>
</div>
<div class="section" id="registering-a-worldgeneratormodifer">
<h2>Registering a WorldGeneratorModifer<a class="headerlink" href="#registering-a-worldgeneratormodifer" title="Permalink to this headline">¶</a></h2>
<p>Now that you have created our modifier, you need to register it. A good place to do this is in an
<tt class="docutils literal"><span class="pre">InitializationEvent</span></tt> {Citation needed}. To register it, simply call <tt class="docutils literal"><span class="pre">GameRegistry.registerWorldGeneratorModifier</span></tt>.</p>
<div class="highlight-java"><div class="highlight"><pre><span class="nd">@Inject</span> <span class="n">GameRegistry</span> <span class="n">registry</span><span class="o">;</span>

<span class="nd">@Listener</span>
<span class="kd">public</span> <span class="kt">void</span> <span class="nf">initialize</span><span class="o">(</span><span class="n">InitializationEvent</span> <span class="n">event</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">registry</span><span class="o">.</span><span class="na">register</span><span class="o">(...)</span>
    <span class="n">blahh</span>
<span class="o">}</span>
</pre></div>
</div>
<p>[TODO something about how to specify to use the modifier in the world configuration.]</p>
<p>In the next articles we will look deeper at the changes we can make from our <tt class="docutils literal"><span class="pre">WorldGeneratorModifer</span></tt>.</p>
</div>
<div class="section" id="modifying-vanilla-generation">
<h2>Modifying Vanilla Generation<a class="headerlink" href="#modifying-vanilla-generation" title="Permalink to this headline">¶</a></h2>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">This page assumes that you are familiar with setting up your <tt class="docutils literal"><span class="pre">WorldGeneratorModifier</span></tt>.
If not then please see the article on setting up your plugin. {Citation needed}</p>
</div>
<p>Sponge exposes a great deal of vanilla world generation, which can be manipulated through the various interfaces.
Currently, the only elements of the generation process that are <em>easily</em> exposed to manipulation are the populators.</p>
<p>For a quick example, let&#8217;s look at how we would change the cactii that spawn in deserts to be taller.</p>
<div class="highlight-java"><div class="highlight"><pre><span class="nd">@Override</span>
<span class="kd">public</span> <span class="kt">void</span> <span class="nf">modifyWorldGenerator</span><span class="o">(</span><span class="n">WorldCreationSettings</span> <span class="n">world</span><span class="o">,</span> <span class="n">DataContainer</span> <span class="n">settings</span><span class="o">,</span> <span class="n">WorldGenerator</span> <span class="n">worldGenerator</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">BiomeGenerationSettings</span> <span class="n">desertSettings</span> <span class="o">=</span> <span class="n">BiomeTypes</span><span class="o">.</span><span class="na">DESERT</span><span class="o">.</span><span class="na">getGenerationSettings</span><span class="o">();</span>
    <span class="k">for</span><span class="o">(</span><span class="n">Populator</span> <span class="n">populator</span><span class="o">:</span> <span class="n">desertSettings</span><span class="o">.</span><span class="na">getPopulators</span><span class="o">())</span> <span class="o">{</span>
        <span class="k">if</span><span class="o">(</span><span class="n">populator</span> <span class="k">instanceof</span> <span class="n">Cactus</span><span class="o">)</span> <span class="o">{</span>
            <span class="o">((</span><span class="n">Cactus</span><span class="o">)</span> <span class="n">populator</span><span class="o">).</span><span class="na">setHeight</span><span class="o">(</span><span class="mi">5</span><span class="o">);</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre></div>
</div>
<p>Start by getting the <tt class="docutils literal"><span class="pre">BiomeGenerationSettings</span></tt> for the desert biome. This object is a container for all generation
settings relating to that biome. Next, iterate through the list of populators and check for the Cactus populator.
Every cactus populator found is set to height 5, which means it can only generate cactii which are 5 blocks tall.</p>
<p>However there is a problem with the code example above. It calls <tt class="docutils literal"><span class="pre">BiomeTypes.DESERT</span></tt>, and that means modifying <em>every</em>
desert, in <em>every</em> world. If you only want to modify the deserts in a specific world, you must use <em>Biome Overrides</em>.</p>
<p>Within the <tt class="docutils literal"><span class="pre">WorldGenerator</span></tt> interface there are a number of methods that deal with Biome Overrides.
These overrides are alternate instances of <tt class="docutils literal"><span class="pre">BiomeGenerationSettings</span></tt> that are used in place of the default
generation settings specified on the <tt class="docutils literal"><span class="pre">BiomeType</span></tt>.</p>
<p>Start by creating a new <tt class="docutils literal"><span class="pre">BiomeGenerationSettings</span></tt> instance which is a perfect copy of the settings specified
by the desert biome. Then apply your changes to this instance, and finally apply this new instance to the world
generator as an override for the desert biome.</p>
<div class="highlight-java"><div class="highlight"><pre><span class="nd">@Override</span>
<span class="kd">public</span> <span class="kt">void</span> <span class="nf">modifyWorldGenerator</span><span class="o">(</span><span class="n">WorldCreationSettings</span> <span class="n">world</span><span class="o">,</span> <span class="n">DataContainer</span> <span class="n">settings</span><span class="o">,</span> <span class="n">WorldGenerator</span> <span class="n">worldGenerator</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">BiomeGenerationSettings</span> <span class="n">desertSettings</span><span class="o">;</span>
    <span class="k">if</span><span class="o">(</span><span class="n">worldGenerator</span><span class="o">.</span><span class="na">isBiomeOverriden</span><span class="o">(</span><span class="n">BiomeTypes</span><span class="o">.</span><span class="na">DESERT</span><span class="o">))</span> <span class="o">{</span>
        <span class="n">desertSettings</span> <span class="o">=</span> <span class="n">worldGenerator</span><span class="o">.</span><span class="na">getBiomeOverride</span><span class="o">(</span><span class="n">BiomeTypes</span><span class="o">.</span><span class="na">DESERT</span><span class="o">);</span>
    <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
        <span class="n">desertSettings</span> <span class="o">=</span> <span class="n">BiomeTypes</span><span class="o">.</span><span class="na">DESERT</span><span class="o">.</span><span class="na">getGenerationSettings</span><span class="o">().</span><span class="na">clone</span><span class="o">();</span>
    <span class="o">}</span>
    <span class="k">for</span><span class="o">(</span><span class="n">Populator</span> <span class="n">populator</span><span class="o">:</span> <span class="n">desertSettings</span><span class="o">.</span><span class="na">getPopulators</span><span class="o">())</span> <span class="o">{</span>
        <span class="k">if</span><span class="o">(</span><span class="n">populator</span> <span class="k">instanceof</span> <span class="n">Cactus</span><span class="o">)</span> <span class="o">{</span>
            <span class="o">((</span><span class="n">Cactus</span><span class="o">)</span> <span class="n">populator</span><span class="o">).</span><span class="na">setHeight</span><span class="o">(</span><span class="mi">5</span><span class="o">);</span>
        <span class="o">}</span>
    <span class="o">}</span>
    <span class="n">worldGenerator</span><span class="o">.</span><span class="na">addBiomeOverride</span><span class="o">(</span><span class="n">BiomeType</span><span class="o">.</span><span class="na">DESERT</span><span class="o">,</span> <span class="n">desertSettings</span><span class="o">);</span>
<span class="o">}</span>
</pre></div>
</div>
<p>Observer that the loop for changing the Cactus populator has stayed the same, but it has changed how we
get the desertSettings. First it checks if the biome has already been overridden for this world generator
(probably by another plugin), if so then it get the settings from the world generator. If it has not been
overriden then it gets a clone of the desert biome&#8217;s settings. Then after changes have been made, the
settings are applied back to the world generator as an override for the desert biome.</p>
<p>This has been a simple example of how to modify an existing populator. Let&#8217;s look at how we can add a new
instance of a vanilla populator. This time the populator will be added globally, which means it will be
applied to all chunks regardless of the biome. Let&#8217;s add a Pumpkin populator globally, causing pumpkins to be
scattered everywhere throughout the world.</p>
<div class="highlight-java"><div class="highlight"><pre><span class="n">PopulatorFactory</span> <span class="n">factory</span><span class="o">;</span>

<span class="nd">@Override</span>
<span class="kd">public</span> <span class="kt">void</span> <span class="nf">modifyWorldGenerator</span><span class="o">(</span><span class="n">WorldCreationSettings</span> <span class="n">world</span><span class="o">,</span> <span class="n">DataContainer</span> <span class="n">settings</span><span class="o">,</span> <span class="n">WorldGenerator</span> <span class="n">worldGenerator</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">Pumpkin</span><span class="o">.</span><span class="na">Builder</span> <span class="n">builder</span> <span class="o">=</span> <span class="n">factory</span><span class="o">.</span><span class="na">newPumpkinBuilder</span><span class="o">();</span>
    <span class="n">builder</span><span class="o">.</span><span class="na">count</span><span class="o">(</span><span class="mi">12</span><span class="o">);</span>
    <span class="n">Pumpkin</span> <span class="n">pumpkinPopulator</span> <span class="o">=</span> <span class="n">builder</span><span class="o">.</span><span class="na">build</span><span class="o">();</span>
    <span class="n">worldGenerator</span><span class="o">.</span><span class="na">getPopulators</span><span class="o">().</span><span class="na">add</span><span class="o">(</span><span class="n">pumpkinPopulator</span><span class="o">);</span>
<span class="o">}</span>
</pre></div>
</div>
<p>Contrary to the previous example, this time you are creating an entirely new populator. To do this, first you need to
get a builder for that populator from the <tt class="docutils literal"><span class="pre">PopulatorFactory</span></tt> (which can be fetched from the game registry).
Then set your desired settings for the populator into it - in this case, we want a dozen pumpkins to spawn per patch.
Finally, add your new populator to the list of populators that are applied globally to the world.</p>
<p>Voila, now we have pumpkins everywhere.</p>
<p>These two examples should serve to help you get familiar with the realm of working with vanilla populators.
This only touches the surface of what is possible. For a complete listing of available populators, and their
properties, see the javadocs for a complete listing of available populators and their properties.</p>
</div>
<div class="section" id="creating-custom-base-terrain">
<h2>Creating Custom Base Terrain<a class="headerlink" href="#creating-custom-base-terrain" title="Permalink to this headline">¶</a></h2>
<p>Changing the base <tt class="docutils literal"><span class="pre">GenerationPopulator</span></tt> of a world generator allows you to change the base terrain shape
generation of the world. A generator populator will roughly follow the procedure of using the seed and biome
information to seed and modify a series of noise maps, from which the terrain is formed. The terrain created
in a modified base generator populator should only consist of stone blocks, to allow the biomes to properly replace
blocks for biome-specific ground cover.</p>
<div class="highlight-java"><div class="highlight"><pre><span class="kd">public</span> <span class="kd">class</span> <span class="nc">SinusoidalGenerator</span> <span class="kd">implements</span> <span class="n">GenerationPopulator</span> <span class="o">{</span>
        <span class="nd">@Override</span>
        <span class="kd">public</span> <span class="kt">void</span> <span class="nf">populate</span><span class="o">(</span><span class="n">World</span> <span class="n">world</span><span class="o">,</span> <span class="n">MutableBlockVolume</span> <span class="n">buffer</span><span class="o">,</span> <span class="n">ImmutableBiomeArea</span> <span class="n">biomes</span><span class="o">)</span> <span class="o">{</span>
                <span class="k">for</span><span class="o">(</span><span class="kt">int</span> <span class="n">x</span> <span class="o">=</span> <span class="n">buffer</span><span class="o">.</span><span class="na">getBlockMin</span><span class="o">().</span><span class="na">getX</span><span class="o">(),</span> <span class="n">x</span> <span class="o">&lt;</span> <span class="n">buffer</span><span class="o">.</span><span class="na">getBlockMax</span><span class="o">().</span><span class="na">getX</span><span class="o">();</span> <span class="n">x</span><span class="o">++)</span> <span class="o">{</span>
                        <span class="k">for</span><span class="o">(</span><span class="kt">int</span> <span class="n">z</span> <span class="o">=</span> <span class="n">buffer</span><span class="o">.</span><span class="na">getBlockMin</span><span class="o">().</span><span class="na">getZ</span><span class="o">(),</span> <span class="n">z</span> <span class="o">&lt;</span> <span class="n">buffer</span><span class="o">.</span><span class="na">getBlockMax</span><span class="o">().</span><span class="na">getZ</span><span class="o">();</span> <span class="n">z</span><span class="o">++)</span> <span class="o">{</span>
                                <span class="n">BiomeType</span> <span class="n">biome</span> <span class="o">=</span> <span class="n">biomes</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">x</span><span class="o">,</span> <span class="n">z</span><span class="o">);</span>
                                <span class="kt">int</span> <span class="n">height</span> <span class="o">=</span> <span class="n">getHeight</span><span class="o">(</span><span class="n">x</span><span class="o">,</span> <span class="n">z</span><span class="o">,</span> <span class="n">biome</span><span class="o">);</span>
                                <span class="k">for</span><span class="o">(</span><span class="kt">int</span> <span class="n">y</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span> <span class="n">y</span> <span class="o">&lt;</span> <span class="n">height</span> <span class="o">||</span> <span class="n">y</span> <span class="o">&lt;</span> <span class="mi">64</span><span class="o">;</span> <span class="n">y</span><span class="o">++)</span> <span class="o">{</span>
                                        <span class="k">if</span><span class="o">(</span><span class="n">y</span> <span class="o">&lt;</span> <span class="n">height</span><span class="o">)</span> <span class="o">{</span>
                                                <span class="n">buffer</span><span class="o">.</span><span class="na">set</span><span class="o">(</span><span class="n">x</span><span class="o">,</span> <span class="n">y</span><span class="o">,</span> <span class="n">z</span><span class="o">,</span> <span class="n">BlockTypes</span><span class="o">.</span><span class="na">STONE</span><span class="o">);</span>
                                        <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
                                                <span class="n">buffer</span><span class="o">.</span><span class="na">set</span><span class="o">(</span><span class="n">x</span><span class="o">,</span> <span class="n">y</span><span class="o">,</span> <span class="n">z</span><span class="o">,</span> <span class="n">BlockTypes</span><span class="o">.</span><span class="na">WATER</span><span class="o">);</span>
                                        <span class="o">}</span>
                                <span class="o">}</span>
                        <span class="o">}</span>
                <span class="o">}</span>
        <span class="o">}</span>

        <span class="kd">private</span> <span class="kt">int</span> <span class="nf">getHeight</span><span class="o">(</span><span class="kt">int</span> <span class="n">x</span><span class="o">,</span> <span class="kt">int</span> <span class="n">z</span><span class="o">,</span> <span class="n">BiomeType</span> <span class="n">biome</span><span class="o">)</span> <span class="o">{</span>
                <span class="kt">double</span> <span class="n">sx</span> <span class="o">=</span> <span class="n">Math</span><span class="o">.</span><span class="na">sin</span><span class="o">(</span><span class="n">x</span><span class="o">/</span><span class="mi">64</span><span class="n">d</span><span class="o">)+</span><span class="mi">1</span><span class="o">;</span>
                <span class="kt">double</span> <span class="n">sz</span> <span class="o">=</span> <span class="n">Math</span><span class="o">.</span><span class="na">sin</span><span class="o">(</span><span class="n">z</span><span class="o">/</span><span class="mi">64</span><span class="n">d</span><span class="o">)+</span><span class="mi">1</span><span class="o">;</span>
                <span class="kt">double</span> <span class="n">value</span> <span class="o">=</span> <span class="o">(</span><span class="n">sx</span> <span class="o">+</span> <span class="n">sz</span><span class="o">)</span> <span class="o">/</span> <span class="mi">4</span><span class="n">d</span><span class="o">;</span>
                <span class="n">BiomeGenerationSettings</span> <span class="n">settings</span> <span class="o">=</span> <span class="n">biome</span><span class="o">.</span><span class="na">getGenerationSettings</span><span class="o">();</span>
                <span class="kt">double</span> <span class="n">heightRange</span> <span class="o">=</span> <span class="n">settings</span><span class="o">.</span><span class="na">getMaxHeight</span><span class="o">()</span> <span class="o">-</span> <span class="n">settings</span><span class="o">.</span><span class="na">getMinHeight</span><span class="o">();</span>
                <span class="kt">double</span> <span class="n">height</span> <span class="o">=</span> <span class="n">heightRange</span> <span class="o">*</span> <span class="n">value</span> <span class="o">|</span> <span class="n">settings</span><span class="o">.</span><span class="na">getMinHeight</span><span class="o">;</span>
                <span class="k">return</span> <span class="n">GenericMath</span><span class="o">.</span><span class="na">floor</span><span class="o">(</span><span class="n">height</span> <span class="o">*</span> <span class="mi">256</span><span class="o">);</span>
        <span class="o">}</span>
<span class="o">}</span>
</pre></div>
</div>
<p>This is a fairly simple example of a base terrain generation populator (at least, if you look past the math to
calculate the height). For each column in the buffered area we want to calculate a height value, and then fill
in everything below that with stone and leave everything above it as air (or water if we&#8217;re still below sea-level).</p>
<p>[You can of course ... TBA]</p>
<p>[TBA Add some simple example of creating noise with flow-noise and creating terrain from it.]</p>
</div>
<div class="section" id="creating-custom-generationpopulators">
<h2>Creating Custom GenerationPopulators<a class="headerlink" href="#creating-custom-generationpopulators" title="Permalink to this headline">¶</a></h2>
<p>[TBA]</p>
</div>
<div class="section" id="creating-custom-populators">
<h2>Creating Custom Populators<a class="headerlink" href="#creating-custom-populators" title="Permalink to this headline">¶</a></h2>
<p>Custom populators can be used to add a great variety of custom features. To create a custom populator you need
only create a class implementing the Populator interface and add it to the list of populators attached to a
biome, or to a world generator if you want it applied globally.</p>
<p>The key thing to remember when creating a populator is that the area affected by the populator is a 16x16 area
offset by 8 in both the x and z axes</p>
<p>[see image]</p>
<p>[Insert an example or two.]</p>
</div>
<div class="section" id="creating-custom-biomes">
<h2>Creating Custom Biomes<a class="headerlink" href="#creating-custom-biomes" title="Permalink to this headline">¶</a></h2>
<p><em>At present it is not possible to create entirely new biomes from purely within the SpongeAPI.</em></p>
<dl class="docutils">
<dt>[TODO]</dt>
<dd><ul class="first last simple">
<li>add WorldGenerator.getPopulators)</li>
<li>add BiomeGenerationSettings.getPopulators)</li>
<li>Test code snippets and update for usability changes</li>
</ul>
</dd>
</dl>
</div>
</div>


                </div>
              </div>
            </div>
          <div class="clearer"></div>
        </div>
        <div class="footer" role="contentinfo">
              &copy; Copyright 2014-2015, Sponge Contributors.
            Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.2.
        </div>
    </div>
  </body>
</html>